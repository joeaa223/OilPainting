import{d as ie,r as f,c as P,u as R,o as d,a as u,b as e,t as v,e as U,F as $,f as q,g as de,n as z,h as y,w as D,v as S,i as ce,j as te,s as ve,k as oe,l as W,m as A,p as j,q as L,x as se,y as N,z as Z,A as pe,B as he,C as ne,D as xe,E as be,G as we,H as ke}from"./vendor-29d2aae4.js";import{a as ye}from"./axios-b5ee139b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(c){if(c.ep)return;c.ep=!0;const i=o(c);fetch(c.href,i)}})();const _e="modulepreload",Ce=function(a){return"/"+a},le={},Ae=function(t,o,r){if(!o||o.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(o.map(i=>{if(i=Ce(i),i in le)return;le[i]=!0;const s=i.endsWith(".css"),m=s?'[rel="stylesheet"]':"";if(!!r)for(let g=c.length-1;g>=0;g--){const k=c[g];if(k.href===i&&(!s||k.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${m}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":_e,s||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),s)return new Promise((g,k)=>{l.addEventListener("load",g),l.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})},F=ye.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});F.interceptors.request.use(a=>{const t=localStorage.getItem("token");return t&&(a.headers.Authorization=`Bearer ${t}`),a},a=>Promise.reject(a));F.interceptors.response.use(a=>a,a=>{var t;return((t=a.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/admin/login"&&(window.location.href="/admin/login")),Promise.reject(a)});const Ie=async(a,t=null)=>{var c,i;const o=new FormData;a.forEach((s,m)=>{o.append("images",s)});const r=t?`/artworks/${t}/images`:"/artworks";try{return{success:!0,data:(await F.post(r,o,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(s){return{success:!1,error:((i=(c=s.response)==null?void 0:c.data)==null?void 0:i.message)||s.message||"Upload failed"}}},Le=async(a,t)=>{var r,c;const o=new FormData;o.append("title",a.title),o.append("creationDate",a.creationDate),o.append("description",a.description),o.append("height",a.height),o.append("width",a.width),a.depth!==void 0&&o.append("depth",a.depth),o.append("material",a.material),o.append("withFrame",a.withFrame),a.coverIndex!==void 0&&o.append("coverIndex",a.coverIndex),t.forEach((i,s)=>{o.append("images",i)});try{return{success:!0,data:(await F.post("/artworks",o,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(i){return{success:!1,error:((c=(r=i.response)==null?void 0:r.data)==null?void 0:c.message)||i.message||"Failed to create artwork"}}},je=async(a,t)=>{var o,r;try{return{success:!0,data:(await F.patch(`/artworks/${a}`,t)).data}}catch(c){return{success:!1,error:((r=(o=c.response)==null?void 0:o.data)==null?void 0:r.message)||c.message||"Failed to update artwork"}}},ue=async a=>{var t,o;try{return{success:!0,data:(await F.delete(`/artworks/${a}`)).data}}catch(r){return{success:!1,error:((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.message)||r.message||"Failed to delete artwork"}}},me=ie("auth",()=>{const a=f(localStorage.getItem("token")||""),t=f(JSON.parse(localStorage.getItem("user")||"null")),o=f(!1),r=f(""),c=P(()=>!!a.value),i=P(()=>{var b;return((b=t.value)==null?void 0:b.role)==="admin"}),s=b=>{a.value=b.token,t.value=b.user,localStorage.setItem("token",b.token),localStorage.setItem("user",JSON.stringify(b.user)),F.defaults.headers.common.Authorization=`Bearer ${b.token}`},m=()=>{a.value="",t.value=null,r.value="",localStorage.removeItem("token"),localStorage.removeItem("user"),delete F.defaults.headers.common.Authorization},n=async b=>{var p,I;try{o.value=!0,r.value="";const _=await F.post("/auth/login",b);if(_.data.token)return s(_.data),{success:!0,data:_.data};throw new Error("Login response format error")}catch(_){return r.value=((I=(p=_.response)==null?void 0:p.data)==null?void 0:I.message)||_.message||"Login failed",{success:!1,error:r.value}}finally{o.value=!1}},l=()=>{const b=R();m(),b.push("/admin/login")},g=async()=>{if(!a.value)return!1;try{const b=await F.get("/auth/me");if(b.data.user)return t.value=b.data.user,localStorage.setItem("user",JSON.stringify(b.data.user)),!0}catch(b){return console.error("Token validation failed:",b),m(),!1}return!1};return{token:a,user:t,loading:o,error:r,isAuthenticated:c,isAdmin:i,setAuth:s,clearAuth:m,login:n,logout:l,validateToken:g,initAuth:async()=>{a.value&&await g()},changePassword:async b=>{var p,I;try{return o.value=!0,r.value="",{success:!0,data:(await F.patch("/auth/change-password",b)).data}}catch(_){return r.value=((I=(p=_.response)==null?void 0:p.data)==null?void 0:I.message)||_.message||"Failed to change password",{success:!1,error:r.value}}finally{o.value=!1}}}}),re=ie("gallery",()=>{const a=f([]),t=f(!1),o=f(""),r=f(1),c=f(9),i=f(0),s=f(0),m=f(""),n=P(()=>r.value<s.value),l=P(()=>r.value>1),g=P(()=>!!(t.value||!a.value||a.value.length===0)),k=P(()=>r.value===1),M=P(()=>r.value===s.value),b=async(C={})=>{var Q,K;try{t.value=!0,o.value="";const O={page:C.page||r.value,limit:C.limit||c.value,q:C.q!==void 0?C.q:m.value},x=await F.get("/artworks",{params:O});return a.value=x.data.items,r.value=x.data.page,c.value=x.data.limit,i.value=x.data.total,s.value=x.data.totalPages,{success:!0,data:x.data}}catch(O){return o.value=((K=(Q=O.response)==null?void 0:Q.data)==null?void 0:K.message)||O.message||"Failed to fetch artwork list",{success:!1,error:o.value}}finally{t.value=!1}},p=C=>C>=1&&C<=s.value?(r.value=C,!0):!1,I=()=>n.value?(r.value++,!0):!1,_=()=>l.value?(r.value--,!0):!1,E=C=>C>=1&&C<=s.value?(r.value=C,!0):!1,V=C=>{m.value=C,r.value=1};return{items:a,loading:t,error:o,page:r,limit:c,total:i,totalPages:s,searchQuery:m,hasNext:n,hasPrev:l,isEmpty:g,isFirstPage:k,isLastPage:M,fetchList:b,setPage:p,nextPage:I,prevPage:_,goToPage:E,setSearchQuery:V,search:async C=>(V(C),await b({page:1,q:C})),resetSearch:()=>{m.value="",r.value=1},fetchArtwork:async C=>{var Q,K;try{return t.value=!0,o.value="",{success:!0,data:(await F.get(`/artworks/${C}`)).data}}catch(O){return o.value=((K=(Q=O.response)==null?void 0:Q.data)==null?void 0:K.message)||O.message||"Failed to fetch artwork details",{success:!1,error:o.value}}finally{t.value=!1}},clearError:()=>{o.value=""},reset:()=>{a.value=[],t.value=!1,o.value="",r.value=1,c.value=9,i.value=0,s.value=0,m.value=""}}});const G=(a,t)=>{const o=a.__vccOpts||a;for(const[r,c]of t)o[r]=c;return o},Pe={name:"ArtworkCard",props:{artwork:{type:Object,required:!0}},setup(a){const t=R();return{formatCreationDate:c=>{const i=new Date(c),s=i.getFullYear(),m=i.getMonth()+1;return`${s} 年 ${m.toString().padStart(2,"0")} 月`},navigateToDetail:()=>{t.push(`/artwork/${a.artwork._id}`)}}}},Me={class:"flip-card-inner group-hover:rotate-y-180"},De={class:"flip-card-front"},Se={class:"image-container relative overflow-hidden bg-gradient-to-br from-nature-warm to-nature-sky"},Fe=["src","alt","width","height"],Ue={class:"absolute inset-0 flex flex-col justify-end p-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0"},Ee={class:"text-2xl font-serif text-white mb-3 drop-shadow-lg"},Be={class:"info-bar bg-white/95 backdrop-blur-sm border-t border-white/20"},Te={class:"px-4 py-3"},ze={class:"text-lg font-serif text-nature-forest truncate"},Ge={class:"flip-card-back"},$e={class:"back-content bg-gradient-to-br from-nature-forest to-nature-dark text-white p-6 flex flex-col justify-center"},qe={class:"text-2xl font-serif text-center mb-4 text-white"},Ve={class:"text-center mb-4"},Oe={class:"text-lg"},Ne={class:"text-center mb-6"},Re={class:"text-sm leading-relaxed opacity-90 line-clamp-3"};function He(a,t,o,r,c,i){return d(),u("div",{class:"flip-card group cursor-pointer",onClick:t[0]||(t[0]=(...s)=>r.navigateToDetail&&r.navigateToDetail(...s))},[e("div",Me,[e("div",De,[e("div",Se,[e("img",{src:o.artwork.coverImage.thumbnailUrl,alt:`${o.artwork.title} - Oil Painting`,width:o.artwork.coverImage.width,height:o.artwork.coverImage.height,loading:"lazy",class:"w-full h-full object-cover transition-all duration-700 group-hover:scale-105"},null,8,Fe),t[2]||(t[2]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),e("div",Ue,[e("h3",Ee,v(o.artwork.title),1),t[1]||(t[1]=e("div",{class:"flex items-center space-x-2 text-white/90"},[e("span",{class:"text-sm font-medium"},"View Details"),e("svg",{class:"w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))]),t[3]||(t[3]=e("div",{class:"absolute inset-0 border-2 border-white/20 group-hover:border-white/40 transition-all duration-500"},null,-1)),t[4]||(t[4]=e("div",{class:"absolute top-4 right-4 w-3 h-3 bg-white/30 rounded-full group-hover:bg-white/60 transition-all duration-500"},null,-1)),t[5]||(t[5]=e("div",{class:"absolute top-8 right-4 w-2 h-2 bg-white/20 rounded-full group-hover:bg-white/40 transition-all duration-500 delay-100"},null,-1))]),e("div",Be,[e("div",Te,[e("h4",ze,v(o.artwork.title),1)])])]),e("div",Ge,[e("div",$e,[e("h3",qe,v(o.artwork.title),1),e("div",Ve,[t[6]||(t[6]=e("div",{class:"text-nature-sky text-sm mb-2"},"Creation Date",-1)),e("div",Oe,v(r.formatCreationDate(o.artwork.creationDate)),1)]),e("div",Ne,[t[7]||(t[7]=e("div",{class:"text-nature-sky text-sm mb-2"},"Description",-1)),e("p",Re,v(o.artwork.description),1)]),t[8]||(t[8]=e("div",{class:"text-center text-nature-sky text-xs opacity-70"},[e("div",{class:"flex items-center justify-center space-x-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})]),e("span",null,"Hover to view front")])],-1))])])])])}const Je=G(Pe,[["render",He],["__scopeId","data-v-6f54fd7b"]]);const Qe={name:"GalleryGrid",components:{ArtworkCard:Je},props:{artworks:{type:Array,required:!0}}},Ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"};function We(a,t,o,r,c,i){const s=U("ArtworkCard");return d(),u("div",Ke,[(d(!0),u($,null,q(o.artworks,m=>(d(),de(s,{key:m._id,artwork:m,class:"animate-fade-in"},null,8,["artwork"]))),128))])}const Ye=G(Qe,[["render",We],["__scopeId","data-v-2f81c698"]]);const Ze={name:"Pagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["page-change"],setup(a){const t=f(""),o=P(()=>{const n=[],l=Math.max(2,a.currentPage-1),g=Math.min(a.totalPages-1,a.currentPage+1);for(let k=l;k<=g;k++)k>1&&k<a.totalPages&&n.push(k);return n}),r=P(()=>a.currentPage>3),c=P(()=>a.currentPage>4),i=P(()=>a.currentPage<a.totalPages-2),s=P(()=>a.currentPage<a.totalPages-3);return{jumpPage:t,visiblePages:o,showFirstPage:r,showFirstEllipsis:c,showLastPage:i,showLastEllipsis:s,handleJumpPage:()=>{const n=parseInt(t.value);n&&n>=1&&n<=a.totalPages&&(this.$emit("page-change",n),t.value="")}}}},Xe={class:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0"},et={class:"text-sm text-nature-dark"},tt={class:"flex items-center space-x-2"},rt=["disabled"],ot={class:"flex items-center space-x-1"},st={key:1,class:"px-2 text-nature-sky"},at=["onClick"],nt={key:2,class:"px-2 text-nature-sky"},lt=["disabled"],it={class:"flex items-center space-x-2"},dt=["max"];function ct(a,t,o,r,c,i){return d(),u("div",Xe,[e("div",et," Total "+v(o.total)+" artworks, Page "+v(o.currentPage)+" of "+v(o.totalPages),1),e("div",tt,[e("button",{onClick:t[0]||(t[0]=s=>a.$emit("page-change",o.currentPage-1)),disabled:o.currentPage<=1,class:z(["p-2 rounded-lg border-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",o.currentPage<=1?"border-nature-warm text-nature-sky":"border-nature-forest text-nature-forest hover:bg-nature-forest hover:text-white"])},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],10,rt),e("div",ot,[r.showFirstPage?(d(),u("button",{key:0,onClick:t[1]||(t[1]=s=>a.$emit("page-change",1)),class:z(["px-3 py-2 rounded-lg border-2 transition-all duration-200",o.currentPage===1?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])}," 1 ",2)):y("",!0),r.showFirstEllipsis?(d(),u("span",st,"...")):y("",!0),(d(!0),u($,null,q(r.visiblePages,s=>(d(),u("button",{key:s,onClick:m=>a.$emit("page-change",s),class:z(["px-3 py-2 rounded-lg border-2 transition-all duration-200",o.currentPage===s?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},v(s),11,at))),128)),r.showLastEllipsis?(d(),u("span",nt,"...")):y("",!0),r.showLastPage?(d(),u("button",{key:3,onClick:t[2]||(t[2]=s=>a.$emit("page-change",o.totalPages)),class:z(["px-3 py-2 rounded-lg border-2 transition-all duration-200",o.currentPage===o.totalPages?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},v(o.totalPages),3)):y("",!0)]),e("button",{onClick:t[3]||(t[3]=s=>a.$emit("page-change",o.currentPage+1)),disabled:o.currentPage>=o.totalPages,class:z(["p-2 rounded-lg border-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",o.currentPage>=o.totalPages?"border-nature-warm text-nature-sky":"border-nature-forest text-nature-forest hover:bg-nature-forest hover:text-white"])},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,lt)]),e("div",it,[t[9]||(t[9]=e("span",{class:"text-sm text-nature-dark"},"Go to",-1)),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.jumpPage=s),onKeyup:t[5]||(t[5]=ce((...s)=>r.handleJumpPage&&r.handleJumpPage(...s),["enter"])),type:"number",min:"1",max:o.totalPages,class:"w-16 px-2 py-1 text-center border border-nature-warm rounded focus:border-nature-forest focus:outline-none",placeholder:"Page"},null,40,dt),[[S,r.jumpPage,void 0,{number:!0}]]),e("button",{onClick:t[6]||(t[6]=(...s)=>r.handleJumpPage&&r.handleJumpPage(...s)),class:"px-3 py-1 text-sm bg-nature-forest text-white rounded hover:bg-nature-dark transition-colors duration-200"}," 跳转 ")])])}const ut=G(Ze,[["render",ct],["__scopeId","data-v-0bd571f1"]]),Y="/assets/jeffry-art-logo-fd78355a.png",mt={name:"GalleryPage",components:{GalleryGrid:Ye,Pagination:ut},setup(){var w;const a=te(),t=R(),o=re(),r=f(""),c=f(null),i=f(!1),{items:s,loading:m,error:n,page:l,total:g,totalPages:k,isEmpty:M}=ve(o);console.log("Store refs created:",{loading:m.value,isEmpty:M.value,itemsLength:(w=s.value)==null?void 0:w.length});const b=()=>{clearTimeout(c.value),c.value=setTimeout(()=>{p()},500)},p=async()=>{r.value.trim()?await o.search(r.value.trim()):await o.fetchList(),E()},I=async()=>{r.value="",await o.resetSearch(),await o.fetchList(),E()},_=async h=>{await o.fetchList({page:h}),E()},E=()=>{const h={};l.value>1&&(h.page=l.value),r.value&&(h.q=r.value),t.replace({query:h})},V=async()=>{await o.fetchList()};return oe(()=>a.query,h=>{h.page&&o.setPage(parseInt(h.page)),h.q&&(r.value=h.q)},{immediate:!0}),oe(l,()=>{E()}),W(async()=>{console.log("GalleryPage mounted, starting to fetch data..."),a.query.q&&(r.value=a.query.q),a.query.page&&o.setPage(parseInt(a.query.page)),console.log("Calling galleryStore.fetchList()...");const h=await o.fetchList();console.log("fetchList result:",h),console.log("Store state after fetch:",{items:s.value,loading:m.value,error:n.value,total:g.value,isEmpty:M.value}),console.log("Direct store check:",{"galleryStore.loading":o.loading,"galleryStore.items.length":o.items.length,"galleryStore.total":o.total,"galleryStore.isEmpty":o.isEmpty}),console.log("Computed values check:",{"loading.value":m.value,"items.value":s.value,"isEmpty.value":M.value})}),{items:s,loading:m,error:n,page:l,total:g,totalPages:k,isEmpty:M,searchQuery:r,showContact:i,handleSearch:b,performSearch:p,clearSearch:I,handlePageChange:_,retryLoad:V}}},ft={class:"min-h-screen bg-nature-canvas"},gt={class:"bg-white shadow-frame border-b-2 border-nature-warm"},vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pt={class:"flex justify-between items-start mb-8"},ht={class:"flex items-center space-x-4"},xt={class:"mt-8 max-w-md mx-auto"},bt={class:"relative"},wt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},kt={key:0,class:"text-center py-12"},yt={key:1,class:"text-center py-12"},_t={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},Ct={class:"mb-3"},At={key:2,class:"space-y-12"},It={key:0,class:"text-center"},Lt={class:"text-nature-dark"},jt={key:3,class:"text-center py-12"},Pt={class:"text-nature-dark mb-6"},Mt={key:0,class:"btn-primary"},Dt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},St={class:"bg-white rounded-xl shadow-frame p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Ft={class:"flex items-center justify-between mb-6"};function Ut(a,t,o,r,c,i){const s=U("router-link"),m=U("GalleryGrid"),n=U("Pagination");return d(),u("div",ft,[e("header",gt,[e("div",vt,[e("div",pt,[A(s,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[8]||(t[8]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-16 md:h-20 w-auto object-contain"},null,-1)])]),_:1}),e("div",ht,[e("button",{onClick:t[0]||(t[0]=l=>r.showContact=!0),class:"btn-outline inline-flex items-center space-x-2"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),e("span",null,"Contact",-1)])])])]),t[11]||(t[11]=e("div",{class:"text-center"},[e("h1",{class:"text-4xl md:text-5xl font-serif text-nature-forest mb-4"}," Welcome to Jeffry Goh Art "),e("p",{class:"text-lg text-nature-dark max-w-2xl mx-auto"}," Explore the beauty of nature, feel the rhythm of art. Each artwork is a witness of time, every stroke of color is an expression of the soul. ")],-1)),e("div",xt,[e("div",bt,[D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>r.searchQuery=l),onInput:t[2]||(t[2]=(...l)=>r.handleSearch&&r.handleSearch(...l)),onKeyup:t[3]||(t[3]=ce((...l)=>r.performSearch&&r.performSearch(...l),["enter"])),type:"text",placeholder:"Search artwork titles...",class:"input-field pr-12"},null,544),[[S,r.searchQuery]]),e("button",{onClick:t[4]||(t[4]=(...l)=>r.performSearch&&r.performSearch(...l)),class:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-nature-forest hover:text-nature-dark"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])])])])])]),e("main",wt,[r.loading?(d(),u("div",kt,[...t[12]||(t[12]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"},null,-1),e("p",{class:"text-nature-dark"},"Loading artworks...",-1)])])):r.error?(d(),u("div",yt,[e("div",_t,[e("p",Ct,v(r.error),1),e("button",{onClick:t[5]||(t[5]=(...l)=>r.retryLoad&&r.retryLoad(...l)),class:"btn-primary"}," Retry ")])])):r.isEmpty?(d(),u("div",jt,[t[13]||(t[13]=e("div",{class:"bg-nature-warm rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6"},[e("svg",{class:"w-12 h-12 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"No Artworks",-1)),e("p",Pt,v(r.searchQuery?"No matching artworks found":"No artworks in gallery yet, please come back later"),1),r.searchQuery?(d(),u("button",Mt," Back to All Artworks ")):y("",!0)])):(d(),u("div",At,[r.searchQuery?(d(),u("div",It,[e("p",Lt,[L(' Search results for "'+v(r.searchQuery)+'": '+v(r.total)+" artworks found ",1),e("button",{onClick:t[6]||(t[6]=(...l)=>r.clearSearch&&r.clearSearch(...l)),class:"ml-2 text-nature-forest hover:text-nature-dark underline"}," Clear Search ")])])):y("",!0),A(m,{artworks:r.items},null,8,["artworks"]),A(n,{"current-page":r.page,"total-pages":r.totalPages,total:r.total,onPageChange:r.handlePageChange},null,8,["current-page","total-pages","total","onPageChange"])]))]),r.showContact?(d(),u("div",Dt,[e("div",St,[e("div",Ft,[t[16]||(t[16]=e("h2",{class:"text-2xl font-serif text-nature-forest"},"Contact Information",-1)),e("button",{onClick:t[7]||(t[7]=l=>r.showContact=!1),class:"text-nature-sky hover:text-nature-dark transition-colors duration-200"},[...t[15]||(t[15]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t[17]||(t[17]=e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},[e("div",{class:"space-y-6"},[e("div",null,[e("h3",{class:"text-lg font-serif text-nature-forest mb-4"},"Get in Touch"),e("div",{class:"space-y-4"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Email"),e("a",{href:"mailto:goh8370641@gmail.com",class:"text-nature-sky hover:text-nature-forest transition-colors duration-200"}," goh8370641@gmail.com ")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Location"),e("p",{class:"text-nature-sky"},"Taiping, Perak, Malaysia")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Response Time"),e("p",{class:"text-nature-sky"},"Within 24 hours")])])])]),e("div",{class:"bg-nature-warm bg-opacity-30 p-4 rounded-lg"},[e("h4",{class:"font-medium text-nature-forest mb-2"},"About Taiping"),e("p",{class:"text-sm text-nature-dark leading-relaxed"}," Taiping is a historic town in Perak, Malaysia, known for its rich cultural heritage, beautiful landscapes, and vibrant art scene. It's the perfect setting for creating nature-inspired oil paintings that capture the essence of Malaysian landscapes. ")])]),e("div",{class:"space-y-4"},[e("h3",{class:"text-lg font-serif text-nature-forest"},"Location Map"),e("div",{class:"bg-nature-warm bg-opacity-20 rounded-lg p-4 h-80 relative"},[e("iframe",{src:"https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=Taiping,Perak,Malaysia&zoom=12",width:"100%",height:"100%",style:{border:"0","border-radius":"8px"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Taiping, Perak, Malaysia",class:"w-full h-full rounded-lg"}),e("div",{class:"absolute bottom-4 left-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm rounded-lg p-3 shadow-lg"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"text-nature-forest font-medium text-sm"},"Taiping, Perak, Malaysia"),e("p",{class:"text-nature-sky text-xs"},"Historic town with beautiful landscapes")]),e("a",{href:"https://maps.google.com/?q=Taiping,Perak,Malaysia",target:"_blank",rel:"noopener noreferrer",class:"btn-primary btn-sm inline-flex items-center space-x-2 text-xs px-3 py-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})]),e("span",null,"Open")])])])])])],-1))])])):y("",!0)])}const Et=G(mt,[["render",Ut]]);const Bt={name:"Lightbox",props:{images:{type:Array,required:!0},currentIndex:{type:Number,required:!0},artworkTitle:{type:String,required:!0}},emits:["close","navigate"],setup(a,{emit:t}){const o=f(null),r=P(()=>a.images[a.currentIndex]||a.images[0]),c=()=>{t("close")},i=g=>{t("navigate",g)},s=()=>{const g=a.currentIndex>0?a.currentIndex-1:a.images.length-1;t("navigate",g)},m=()=>{const g=a.currentIndex<a.images.length-1?a.currentIndex+1:0;t("navigate",g)},n=g=>{switch(g.key){case"Escape":c();break;case"ArrowLeft":a.images.length>1&&s();break;case"ArrowRight":a.images.length>1&&m();break}},l=g=>{g.preventDefault()};return W(()=>{o.value&&o.value.focus(),document.body.style.overflow="hidden",document.addEventListener("wheel",l,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1})}),se(()=>{document.body.style.overflow="",document.removeEventListener("wheel",l),document.removeEventListener("touchmove",l)}),{lightbox:o,currentImage:r,closeLightbox:c,navigateToImage:i,previousImage:s,nextImage:m,handleKeydown:n}}},Tt={class:"absolute top-4 left-4 text-white text-sm z-10"},zt={class:"bg-black bg-opacity-50 px-3 py-2 rounded-lg"},Gt={class:"font-medium"},$t={class:"text-gray-300"},qt={class:"relative max-w-full max-h-full p-8"},Vt=["src","alt"],Ot={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2"},Nt={class:"flex space-x-2"},Rt=["onClick"],Ht={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between p-4 pointer-events-none"};function Jt(a,t,o,r,c,i){return d(),u("div",{class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center",onClick:t[4]||(t[4]=(...s)=>r.closeLightbox&&r.closeLightbox(...s)),onKeydown:t[5]||(t[5]=(...s)=>r.handleKeydown&&r.handleKeydown(...s)),tabindex:"0",ref:"lightbox"},[e("button",{onClick:t[0]||(t[0]=(...s)=>r.closeLightbox&&r.closeLightbox(...s)),class:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors duration-200 z-10"},[...t[6]||(t[6]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",Tt,[e("div",zt,[e("p",Gt,v(o.artworkTitle),1),e("p",$t,v(o.currentIndex+1)+" / "+v(o.images.length),1)])]),e("div",qt,[e("img",{src:r.currentImage.url,alt:`${o.artworkTitle} - Image ${o.currentIndex+1}`,class:"max-w-full max-h-full object-contain",onClick:t[1]||(t[1]=N(()=>{},["stop"]))},null,8,Vt),e("div",Ot,[e("div",Nt,[(d(!0),u($,null,q(o.images,(s,m)=>(d(),u("button",{key:m,onClick:N(n=>r.navigateToImage(m),["stop"]),class:z(["w-3 h-3 rounded-full transition-all duration-200",m===o.currentIndex?"bg-white":"bg-white bg-opacity-40 hover:bg-opacity-60"])},null,10,Rt))),128))])])]),o.images.length>1?(d(),u("div",Ht,[e("button",{onClick:t[2]||(t[2]=N((...s)=>r.previousImage&&r.previousImage(...s),["stop"])),class:"bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200 pointer-events-auto"},[...t[7]||(t[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:t[3]||(t[3]=N((...s)=>r.nextImage&&r.nextImage(...s),["stop"])),class:"bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200 pointer-events-auto"},[...t[8]||(t[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])):y("",!0),t[9]||(t[9]=e("div",{class:"absolute bottom-4 right-4 text-white text-xs opacity-60"},[e("p",null,"Use ← → keys to navigate, ESC to close")],-1))],544)}const Qt=G(Bt,[["render",Jt],["__scopeId","data-v-e26975da"]]);const Kt={name:"ArtworkDetailPage",components:{Lightbox:Qt},setup(){const a=te(),t=R(),o=re(),r=f(null),c=f([]),i=f(0),s=f(!1),{loading:m,error:n}=o,l=P(()=>!r.value||!r.value.images?null:r.value.images[i.value]||r.value.images[0]),g=h=>{const H=new Date(h),J=H.getFullYear(),X=H.getMonth()+1,C=H.getDate();return`${J} 年 ${X.toString().padStart(2,"0")} 月 ${C.toString().padStart(2,"0")} 日`},k=h=>{h>=0&&h<r.value.images.length&&(i.value=h)},M=()=>{const h=i.value>0?i.value-1:r.value.images.length-1;k(h)},b=()=>{const h=i.value<r.value.images.length-1?i.value+1:0;k(h)},p=()=>{s.value=!0},I=()=>{s.value=!1},_=()=>{t.back()},E=h=>{t.push(`/artwork/${h}`)},V=async()=>{await w()},w=async()=>{try{const h=await o.fetchArtwork(a.params.id);h.success&&(r.value=h.data.artwork,c.value=h.data.relatedArtworks||[])}catch(h){console.error("加载作品详情失败:",h)}};return W(()=>{w()}),{artwork:r,relatedArtworks:c,currentImageIndex:i,showLightbox:s,loading:m,error:n,currentImage:l,formatCreationDate:g,setCurrentImage:k,previousImage:M,nextImage:b,openLightbox:p,closeLightbox:I,goBack:_,navigateToArtwork:E,retryLoad:V}}},Wt={class:"min-h-screen bg-nature-canvas"},Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6"},Zt={class:"flex items-center justify-between"},Xt={key:0,class:"flex items-center justify-center min-h-[60vh]"},er={key:1,class:"flex items-center justify-center min-h-[60vh]"},tr={class:"text-center"},rr={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},or={class:"mb-3"},sr={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ar={class:"text-center mb-12"},nr={class:"text-3xl md:text-4xl font-serif text-nature-forest mb-4"},lr={class:"flex items-center justify-center space-x-6 text-nature-sky"},ir={class:"flex items-center"},dr={class:"flex items-center"},cr={class:"mb-12"},ur={class:"relative bg-white rounded-xl shadow-frame overflow-hidden"},mr={class:"relative aspect-[16/9] bg-nature-warm"},fr=["src","alt"],gr={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2"},vr={class:"flex space-x-2"},pr=["onClick"],hr={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between p-4"},xr={key:0,class:"mt-6 flex justify-center space-x-4 overflow-x-auto"},br=["onClick"],wr=["src","alt"],kr={class:"bg-white rounded-xl shadow-frame p-8 mb-12"},yr={class:"prose prose-lg max-w-none text-nature-dark leading-relaxed"},_r={class:"whitespace-pre-wrap"},Cr={key:0,class:"mb-12"},Ar={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ir=["onClick"],Lr={class:"aspect-[4/3] overflow-hidden bg-nature-warm"},jr=["src","alt"],Pr={class:"p-4"},Mr={class:"font-serif text-nature-forest mb-2 line-clamp-2"},Dr={class:"text-sm text-nature-sky"};function Sr(a,t,o,r,c,i){const s=U("router-link"),m=U("Lightbox");return d(),u("div",Wt,[e("div",Yt,[e("div",Zt,[A(s,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[5]||(t[5]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("button",{onClick:t[0]||(t[0]=(...n)=>r.goBack&&r.goBack(...n)),class:"inline-flex items-center space-x-2 text-nature-forest hover:text-nature-dark transition-colors duration-200"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back to Gallery",-1)])])])]),r.loading?(d(),u("div",Xt,[...t[7]||(t[7]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"}),e("p",{class:"text-nature-dark"},"Loading artwork details...")],-1)])])):r.error?(d(),u("div",er,[e("div",tr,[e("div",rr,[e("p",or,v(r.error),1),e("button",{onClick:t[1]||(t[1]=(...n)=>r.retryLoad&&r.retryLoad(...n)),class:"btn-primary"}," Retry ")])])])):r.artwork?(d(),u("div",sr,[e("div",ar,[e("h1",nr,v(r.artwork.title),1),e("div",lr,[e("div",ir,[t[8]||(t[8]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,v(r.formatCreationDate(r.artwork.creationDate)),1)]),e("div",dr,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,v(r.artwork.images.length)+" images",1)])])]),e("div",cr,[e("div",ur,[e("div",mr,[e("img",{src:r.currentImage.url,alt:`${r.artwork.title} - 图片 ${r.currentImageIndex+1}`,class:"w-full h-full object-contain cursor-pointer",onClick:t[2]||(t[2]=(...n)=>r.openLightbox&&r.openLightbox(...n))},null,8,fr),r.artwork.images.length>1?(d(),u("div",gr,[e("div",vr,[(d(!0),u($,null,q(r.artwork.images,(n,l)=>(d(),u("button",{key:l,onClick:g=>r.setCurrentImage(l),class:z(["w-3 h-3 rounded-full transition-all duration-200",l===r.currentImageIndex?"bg-nature-forest":"bg-white bg-opacity-60 hover:bg-opacity-80"])},null,10,pr))),128))])])):y("",!0)]),r.artwork.images.length>1?(d(),u("div",hr,[e("button",{onClick:t[3]||(t[3]=(...n)=>r.previousImage&&r.previousImage(...n)),class:"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200"},[...t[10]||(t[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:t[4]||(t[4]=(...n)=>r.nextImage&&r.nextImage(...n)),class:"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200"},[...t[11]||(t[11]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])):y("",!0)]),r.artwork.images.length>1?(d(),u("div",xr,[(d(!0),u($,null,q(r.artwork.images,(n,l)=>(d(),u("button",{key:l,onClick:g=>r.setCurrentImage(l),class:z(["flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all duration-200",l===r.currentImageIndex?"border-nature-forest":"border-nature-warm hover:border-nature-sky"])},[e("img",{src:n.thumbnailUrl,alt:`${r.artwork.title} - 缩略图 ${l+1}`,class:"w-full h-full object-cover"},null,8,wr)],10,br))),128))])):y("",!0)]),e("div",kr,[t[12]||(t[12]=e("h2",{class:"text-2xl font-serif text-nature-forest mb-6"},"Artwork Description",-1)),e("div",yr,[e("p",_r,v(r.artwork.description),1)])]),r.relatedArtworks&&r.relatedArtworks.length>0?(d(),u("div",Cr,[t[13]||(t[13]=e("h2",{class:"text-2xl font-serif text-nature-forest mb-6 text-center"},"Related Artworks",-1)),e("div",Ar,[(d(!0),u($,null,q(r.relatedArtworks,n=>(d(),u("div",{key:n._id,onClick:l=>r.navigateToArtwork(n._id),class:"card-frame overflow-hidden cursor-pointer group"},[e("div",Lr,[e("img",{src:n.coverImage.thumbnailUrl,alt:`${n.title} - 封面图片`,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"},null,8,jr)]),e("div",Pr,[e("h3",Mr,v(n.title),1),e("p",Dr,v(r.formatCreationDate(n.creationDate)),1)])],8,Ir))),128))])])):y("",!0)])):y("",!0),r.showLightbox?(d(),de(m,{key:3,images:r.artwork.images,"current-index":r.currentImageIndex,"artwork-title":r.artwork.title,onClose:r.closeLightbox,onNavigate:r.setCurrentImage},null,8,["images","current-index","artwork-title","onClose","onNavigate"])):y("",!0)])}const Fr=G(Kt,[["render",Sr],["__scopeId","data-v-5c46a481"]]);const Ur={name:"AdminLoginPage",setup(){const a=R(),t=te(),o=me(),r=f({email:"",password:""}),{loading:c,error:i}=o,s=async()=>{try{if((await o.login({email:r.value.email.trim(),password:r.value.password})).success){const n=t.query.redirect||"/admin";a.push(n)}}catch(m){console.error("登录失败:",m)}};return W(()=>{if(o.isAuthenticated){const m=t.query.redirect||"/admin";a.push(m)}}),{form:r,loading:c,error:i,handleLogin:s}}},Er={class:"min-h-screen bg-nature-canvas flex items-center justify-center p-4"},Br={class:"max-w-md w-full"},Tr={class:"bg-white rounded-xl shadow-frame p-8"},zr=["disabled"],Gr=["disabled"],$r={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},qr=["disabled"],Vr={key:0,class:"flex items-center justify-center space-x-2"},Or={key:1},Nr={class:"mt-6 text-center"};function Rr(a,t,o,r,c,i){const s=U("router-link");return d(),u("div",Er,[A(s,{to:"/",class:"absolute top-6 left-6 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[3]||(t[3]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("div",Br,[e("div",Tr,[t[8]||(t[8]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-serif text-nature-forest mb-2"},"Admin Login"),e("p",{class:"text-nature-dark"},"Please enter your admin account information")],-1)),e("form",{onSubmit:t[2]||(t[2]=N((...m)=>r.handleLogin&&r.handleLogin(...m),["prevent"])),class:"space-y-6"},[e("div",null,[t[4]||(t[4]=e("label",{for:"email",class:"block text-sm font-medium text-nature-forest mb-2"}," Email ",-1)),D(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=m=>r.form.email=m),type:"email",required:"",class:"input-field",placeholder:"Enter your email address",disabled:r.loading},null,8,zr),[[S,r.form.email]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"password",class:"block text-sm font-medium text-nature-forest mb-2"}," Password ",-1)),D(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=m=>r.form.password=m),type:"password",required:"",class:"input-field",placeholder:"Enter password",disabled:r.loading},null,8,Gr),[[S,r.form.password]])]),r.error?(d(),u("div",$r,v(r.error),1)):y("",!0),e("button",{type:"submit",disabled:r.loading||!r.form.email||!r.form.password,class:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(d(),u("div",Vr,[...t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"Logging in...",-1)])])):(d(),u("span",Or,"Login"))],8,qr)],32),e("div",Nr,[A(s,{to:"/",class:"text-nature-forest hover:text-nature-dark transition-colors duration-200"},{default:j(()=>[...t[7]||(t[7]=[L(" Back to Gallery ",-1)])]),_:1})]),t[9]||(t[9]=Z('<div class="mt-6 p-4 bg-nature-warm rounded-lg" data-v-6991a81a><div class="text-sm text-nature-dark" data-v-6991a81a><p class="font-medium mb-2" data-v-6991a81a>Default Admin Account:</p><p data-v-6991a81a>Email: <code class="bg-white px-2 py-1 rounded" data-v-6991a81a>admin@jeffryart.com</code></p><p data-v-6991a81a>Password: <code class="bg-white px-2 py-1 rounded" data-v-6991a81a>admin123</code></p><p class="text-xs mt-2 text-nature-sky" data-v-6991a81a> ⚠️ Please change the default password in production environment </p></div></div>',1))])])])}const Hr=G(Ur,[["render",Rr],["__scopeId","data-v-6991a81a"]]);const Jr={name:"AdminDashboard",setup(){R();const a=re(),t=f(!1),o=f(null),r=f(!1),c=f([]),i=f(!1),s=f(""),m=f({totalArtworks:0,totalImages:0,thisMonth:0}),n=f([{id:1,message:"系统启动完成",time:new Date}]),l=p=>(typeof p=="string"&&(p=new Date(p)),p.toLocaleString("zh-CN")),g=async()=>{try{i.value=!0,s.value="",await a.fetchList({limit:1e3}),c.value=a.items}catch(p){console.error("加载作品列表失败:",p),s.value="加载作品列表失败"}finally{i.value=!1}},k=async()=>{try{await a.fetchList({limit:1e3}),m.value.totalArtworks=a.total,m.value.totalImages=a.items.reduce((I,_)=>I+_.images.length,0);const p=new Date().getMonth();m.value.thisMonth=a.items.filter(I=>new Date(I.creationDate).getMonth()===p).length}catch(p){console.error("加载统计数据失败:",p)}},M=p=>{o.value=p,t.value=!0},b=async()=>{if(o.value)try{r.value=!0;const p=await ue(o.value._id);p.success?(await g(),await k(),n.value.unshift({id:Date.now(),message:`删除了作品 "${o.value.title}"`,time:new Date}),t.value=!1,o.value=null):alert(p.error||"删除作品失败")}catch(p){console.error("删除作品失败:",p),alert("删除作品失败，请稍后重试")}finally{r.value=!1}};return W(()=>{g(),k()}),{showDeleteConfirm:t,artworkToDelete:o,deleting:r,artworks:c,artworksLoading:i,artworksError:s,stats:m,recentActivities:n,loadArtworks:g,openDeleteConfirm:M,handleDeleteArtwork:b,formatTime:l}}},Qr={class:"min-h-screen bg-nature-canvas"},Kr={class:"bg-white shadow-frame border-b-2 border-nature-warm"},Wr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Yr={class:"flex items-center justify-between"},Zr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Xr={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},eo={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-forest"},to={class:"flex items-center"},ro={class:"ml-4"},oo={class:"text-2xl font-bold text-nature-forest"},so={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-sky"},ao={class:"flex items-center"},no={class:"ml-4"},lo={class:"text-2xl font-bold text-nature-forest"},io={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-warm"},co={class:"flex items-center"},uo={class:"ml-4"},mo={class:"text-2xl font-bold text-nature-forest"},fo={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},go={class:"bg-white rounded-xl shadow-frame p-6"},vo={class:"space-y-3"},po={class:"bg-white rounded-xl shadow-frame p-6"},ho={class:"space-y-3"},xo={key:0,class:"text-nature-sky text-center py-4"},bo={class:"text-sm text-nature-dark"},wo={class:"ml-auto text-xs text-nature-sky"},ko={class:"bg-white rounded-xl shadow-frame p-6 mb-8"},yo={class:"flex items-center justify-between mb-6"},_o={key:0,class:"text-center py-8"},Co={key:1,class:"text-center py-8"},Ao={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},Io={class:"mb-3"},Lo={key:2,class:"text-center py-8"},jo={key:3,class:"space-y-4"},Po={class:"flex items-center space-x-4"},Mo={class:"w-16 h-16 rounded-lg overflow-hidden bg-white"},Do=["src","alt"],So={class:"font-serif text-nature-forest font-medium"},Fo={class:"text-sm text-nature-sky"},Uo={class:"text-xs text-nature-dark"},Eo={class:"flex items-center space-x-2"},Bo=["onClick"],To={class:"bg-white rounded-xl shadow-frame p-6"},zo={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Go={class:"flex justify-between"},$o={class:"text-nature-forest font-medium"},qo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Vo={class:"bg-white rounded-xl shadow-frame p-6 max-w-md w-full"},Oo={class:"text-center"},No={class:"text-nature-dark mb-6"},Ro={class:"flex space-x-3"},Ho=["disabled"],Jo={key:0,class:"flex items-center justify-center space-x-2"},Qo={key:1};function Ko(a,t,o,r,c,i){var m;const s=U("router-link");return d(),u("div",Qr,[e("header",Kr,[e("div",Wr,[e("div",Yr,[A(s,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[3]||(t[3]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),t[4]||(t[4]=e("div",null,[e("h1",{class:"text-3xl font-serif text-nature-forest"},"Admin Dashboard"),e("p",{class:"text-nature-dark mt-1"},"Manage your oil painting gallery")],-1))])])]),e("main",Zr,[e("div",Xr,[e("div",eo,[e("div",to,[t[6]||(t[6]=e("div",{class:"p-3 bg-nature-forest bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",ro,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-nature-sky"},"Total Artworks",-1)),e("p",oo,v(r.stats.totalArtworks),1)])])]),e("div",so,[e("div",ao,[t[8]||(t[8]=e("div",{class:"p-3 bg-nature-sky bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-sky",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",no,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-nature-sky"},"Total Images",-1)),e("p",lo,v(r.stats.totalImages),1)])])]),e("div",io,[e("div",co,[t[10]||(t[10]=e("div",{class:"p-3 bg-nature-warm bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-warm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",uo,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-nature-sky"},"This Month",-1)),e("p",mo,v(r.stats.thisMonth),1)])])])]),e("div",fo,[e("div",go,[t[14]||(t[14]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Quick Actions",-1)),e("div",vo,[A(s,{to:"/admin/artworks/new",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[11]||(t[11]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"font-medium"},"Upload New Artwork",-1)])]),_:1}),A(s,{to:"/admin/artworks/append",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[12]||(t[12]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"font-medium"},"Add New Images to Existing Collection",-1)])]),_:1}),A(s,{to:"/",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[13]||(t[13]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"font-medium"},"View Gallery",-1)])]),_:1})])]),e("div",po,[t[16]||(t[16]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Recent Activities",-1)),e("div",ho,[r.recentActivities.length===0?(d(),u("div",xo," No recent activities ")):y("",!0),(d(!0),u($,null,q(r.recentActivities,n=>(d(),u("div",{key:n.id,class:"flex items-center p-3 rounded-lg bg-nature-warm bg-opacity-30"},[t[15]||(t[15]=e("div",{class:"w-2 h-2 bg-nature-forest rounded-full mr-3"},null,-1)),e("span",bo,v(n.message),1),e("span",wo,v(r.formatTime(n.time)),1)]))),128))])])]),e("div",ko,[e("div",yo,[t[18]||(t[18]=e("h2",{class:"text-xl font-serif text-nature-forest"},"Artwork Management",-1)),A(s,{to:"/admin/artworks/new",class:"btn-primary"},{default:j(()=>[...t[17]||(t[17]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),L(" Upload New Artwork ",-1)])]),_:1})]),r.artworksLoading?(d(),u("div",_o,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-nature-forest mx-auto mb-4"},null,-1),e("p",{class:"text-nature-dark"},"Loading artworks...",-1)])])):r.artworksError?(d(),u("div",Co,[e("div",Ao,[e("p",Io,v(r.artworksError),1),e("button",{onClick:t[0]||(t[0]=(...n)=>r.loadArtworks&&r.loadArtworks(...n)),class:"btn-primary"},"Retry")])])):r.artworks.length===0?(d(),u("div",Lo,[t[21]||(t[21]=Z('<div class="bg-nature-warm rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4" data-v-8f886c21><svg class="w-8 h-8 text-nature-forest" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8f886c21><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-8f886c21></path></svg></div><h3 class="text-lg font-serif text-nature-forest mb-2" data-v-8f886c21>No Artworks</h3><p class="text-nature-dark mb-4" data-v-8f886c21>No artworks in the gallery yet, please create one first</p>',3)),A(s,{to:"/admin/artworks/new",class:"btn-primary"},{default:j(()=>[...t[20]||(t[20]=[L(" Create First Artwork ",-1)])]),_:1})])):(d(),u("div",jo,[(d(!0),u($,null,q(r.artworks,n=>(d(),u("div",{key:n._id,class:"flex items-center justify-between p-4 bg-nature-warm bg-opacity-20 rounded-lg border border-nature-warm"},[e("div",Po,[e("div",Mo,[e("img",{src:n.coverImage.thumbnailUrl,alt:n.title,class:"w-full h-full object-cover"},null,8,Do)]),e("div",null,[e("h3",So,v(n.title),1),e("p",Fo,v(r.formatTime(n.creationDate)),1),e("p",Uo,v(n.images.length)+" images",1)])]),e("div",Eo,[A(s,{to:`/artwork/${n._id}`,class:"btn-outline px-3 py-2 text-sm"},{default:j(()=>[...t[22]||(t[22]=[L(" View ",-1)])]),_:2},1032,["to"]),A(s,{to:`/admin/artworks/${n._id}/edit`,class:"btn-secondary px-3 py-2 text-sm"},{default:j(()=>[...t[23]||(t[23]=[L(" Edit ",-1)])]),_:2},1032,["to"]),e("button",{onClick:l=>r.openDeleteConfirm(n),class:"btn-danger px-3 py-2 text-sm"}," Delete ",8,Bo)])]))),128))]))]),e("div",To,[t[26]||(t[26]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"System Information",-1)),e("div",zo,[t[25]||(t[25]=Z('<div class="flex justify-between" data-v-8f886c21><span class="text-nature-dark" data-v-8f886c21>System Version:</span><span class="text-nature-forest font-medium" data-v-8f886c21>v1.0.0</span></div><div class="flex justify-between" data-v-8f886c21><span class="text-nature-dark" data-v-8f886c21>Database Status:</span><span class="text-green-600 font-medium" data-v-8f886c21>Normal</span></div><div class="flex justify-between" data-v-8f886c21><span class="text-nature-dark" data-v-8f886c21>Upload Directory:</span><span class="text-nature-forest font-medium" data-v-8f886c21>/uploads</span></div>',3)),e("div",Go,[t[24]||(t[24]=e("span",{class:"text-nature-dark"},"Last Update:",-1)),e("span",$o,v(r.formatTime(new Date)),1)])])])]),r.showDeleteConfirm?(d(),u("div",qo,[e("div",Vo,[e("div",Oo,[t[28]||(t[28]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[29]||(t[29]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"Confirm Delete Artwork",-1)),e("p",No,' Are you sure you want to delete the artwork "'+v((m=r.artworkToDelete)==null?void 0:m.title)+'"? This action cannot be undone, all images will be permanently deleted. ',1),e("div",Ro,[e("button",{onClick:t[1]||(t[1]=n=>r.showDeleteConfirm=!1),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:t[2]||(t[2]=(...n)=>r.handleDeleteArtwork&&r.handleDeleteArtwork(...n)),disabled:r.deleting,class:"btn-danger flex-1 disabled:opacity-50"},[r.deleting?(d(),u("div",Jo,[...t[27]||(t[27]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1),e("span",null,"Deleting...",-1)])])):(d(),u("span",Qo,"Confirm Delete"))],8,Ho)])])])])):y("",!0)])}const Wo=G(Jr,[["render",Ko],["__scopeId","data-v-8f886c21"]]);const Yo={name:"ImageUploader",props:{maxFiles:{type:Number,default:12},maxFileSize:{type:Number,default:10*1024*1024},acceptedTypes:{type:Array,default:()=>["image/jpeg","image/png"]}},emits:["files-change","cover-change"],setup(a,{emit:t}){const o=f(null),r=f([]),c=f(0),i=f(""),s=f(!1),m=f(!1),n=f(0),l=f(0),g=P(()=>l.value===0?0:Math.round(n.value/l.value*100)),k=()=>{var x;(x=o.value)==null||x.click()},M=x=>{const B=Array.from(x.target.files);_(B),x.target.value=""},b=x=>{s.value=!1;const B=Array.from(x.dataTransfer.files);_(B)},p=x=>{x.preventDefault(),s.value=!0},I=x=>{x.preventDefault(),s.value=!0},_=x=>{if(i.value="",r.value.length+x.length>a.maxFiles){i.value=`最多只能选择 ${a.maxFiles} 张图片`;return}const B=[];for(const T of x){if(!a.acceptedTypes.includes(T.type)){i.value=`不支持的文件类型: ${T.name}`;continue}if(T.size>a.maxFileSize){i.value=`文件过大: ${T.name} (${H(T.size)})`;continue}const ee=URL.createObjectURL(T);B.push({file:T,name:T.name,size:T.size,type:T.type,preview:ee})}B.length>0&&(r.value.push(...B),J())},E=x=>{URL.revokeObjectURL(r.value[x].preview),r.value.splice(x,1),c.value>=r.value.length&&(c.value=Math.max(0,r.value.length-1)),J()},V=x=>{c.value=x,t("cover-change",x)},w=()=>{r.value.forEach(x=>{URL.revokeObjectURL(x.preview)}),r.value=[],c.value=0,i.value="",J()},h=()=>{alert("拖拽排序功能开发中...")},H=x=>{if(x===0)return"0 Bytes";const B=1024,T=["Bytes","KB","MB","GB"],ee=Math.floor(Math.log(x)/Math.log(B));return parseFloat((x/Math.pow(B,ee)).toFixed(2))+" "+T[ee]},J=()=>{t("files-change",r.value.map(x=>x.file))},X=(x,B=0)=>{x.value=x,l.value=B,n.value=0},C=x=>{n.value=x},Q=()=>c.value,K=()=>r.value.map(x=>x.file);return oe(r,()=>{J()},{deep:!0}),{fileInput:o,selectedFiles:r,coverIndex:c,error:i,isDragOver:s,uploading:m,uploadedCount:n,totalCount:l,uploadProgress:g,triggerFileInput:k,handleFileSelect:M,handleDrop:b,handleDragOver:p,handleDragEnter:I,removeFile:E,setCoverImage:V,clearAll:w,reorderFiles:h,formatFileSize:H,setUploading:X,updateProgress:C,getCoverIndex:Q,getSelectedFiles:K,cleanup:()=>{r.value.forEach(x=>{URL.revokeObjectURL(x.preview)})}}}},Zo={class:"space-y-4"},Xo={class:"space-y-3"},es={class:"text-lg font-medium text-nature-forest"},ts={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},rs={key:1,class:"space-y-3"},os={class:"flex items-center justify-between text-sm text-nature-dark"},ss={class:"w-full bg-nature-warm rounded-full h-2"},as={key:2,class:"space-y-4"},ns={class:"text-lg font-medium text-nature-forest"},ls={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},is={class:"aspect-square rounded-lg overflow-hidden bg-nature-warm border-2 border-nature-warm"},ds=["src","alt"],cs=["onClick"],us={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},ms={class:"mt-2 text-xs text-nature-dark"},fs={class:"font-medium truncate"},gs=["onClick"],vs={class:"flex space-x-3 pt-4"};function ps(a,t,o,r,c,i){return d(),u("div",Zo,[e("div",{onDrop:t[1]||(t[1]=(...s)=>r.handleDrop&&r.handleDrop(...s)),onDragover:t[2]||(t[2]=N(()=>{},["prevent"])),onDragenter:t[3]||(t[3]=N(()=>{},["prevent"])),onClick:t[4]||(t[4]=(...s)=>r.triggerFileInput&&r.triggerFileInput(...s)),class:z(["border-2 border-dashed border-nature-warm rounded-lg p-8 text-center cursor-pointer hover:border-nature-forest hover:bg-nature-warm hover:bg-opacity-10 transition-all duration-200",{"border-nature-forest bg-nature-forest bg-opacity-5":r.isDragOver}])},[e("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/jpeg,image/png",class:"hidden",onChange:t[0]||(t[0]=(...s)=>r.handleFileSelect&&r.handleFileSelect(...s))},null,544),e("div",Xo,[t[8]||(t[8]=e("svg",{class:"w-12 h-12 text-nature-forest mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("div",null,[e("p",es,v(r.isDragOver?"Drop files to upload":"Click or drag images here"),1),t[7]||(t[7]=e("p",{class:"text-sm text-nature-sky mt-1"}," Supports JPG, PNG format, max 10MB per image, max 12 images ",-1))])])],34),r.error?(d(),u("div",ts,v(r.error),1)):y("",!0),r.uploading?(d(),u("div",rs,[e("div",os,[t[9]||(t[9]=e("span",null,"Uploading...",-1)),e("span",null,v(r.uploadedCount)+" / "+v(r.totalCount),1)]),e("div",ss,[e("div",{class:"bg-nature-forest h-2 rounded-full transition-all duration-300",style:pe({width:`${r.uploadProgress}%`})},null,4)])])):y("",!0),r.selectedFiles.length>0?(d(),u("div",as,[e("h3",ns,"Selected Images ("+v(r.selectedFiles.length)+")",1),e("div",ls,[(d(!0),u($,null,q(r.selectedFiles,(s,m)=>(d(),u("div",{key:m,class:"relative group"},[e("div",is,[e("img",{src:s.preview,alt:`Preview image ${m+1}`,class:"w-full h-full object-cover"},null,8,ds),e("button",{onClick:n=>r.removeFile(m),class:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center hover:bg-red-600"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,cs),r.coverIndex===m?(d(),u("div",us," Cover ")):y("",!0)]),e("div",ms,[e("p",fs,v(s.name),1),e("p",null,v(r.formatFileSize(s.size)),1)]),r.coverIndex!==m?(d(),u("button",{key:0,onClick:n=>r.setCoverImage(m),class:"mt-2 w-full text-xs bg-nature-warm text-nature-forest py-1 px-2 rounded hover:bg-nature-forest hover:text-white transition-colors duration-200"}," 设为封面 ",8,gs)):y("",!0)]))),128))]),e("div",vs,[e("button",{onClick:t[5]||(t[5]=(...s)=>r.clearAll&&r.clearAll(...s)),class:"btn-outline text-sm"}," 清空所有 "),e("button",{onClick:t[6]||(t[6]=(...s)=>r.reorderFiles&&r.reorderFiles(...s)),class:"btn-secondary text-sm"}," 重新排序 ")])])):y("",!0)])}const fe=G(Yo,[["render",ps],["__scopeId","data-v-0bd7b0b0"]]);const hs={name:"UploadNewArtworkPage",components:{ImageUploader:fe},setup(){const a=R(),t=f(null),o=f({title:"",creationDate:"",description:"",height:"",width:"",depth:"",material:"",withFrame:!1}),r=f([]),c=f(0),i=f(!1),s=f(!1),m=P(()=>o.value.title.trim()&&o.value.creationDate&&o.value.description.trim()&&o.value.height&&o.value.width&&o.value.material&&r.value.length>0),n=p=>{r.value=p},l=p=>{c.value=p},g=async()=>{if(m.value)try{i.value=!0;const p=await Le({title:o.value.title.trim(),creationDate:o.value.creationDate,description:o.value.description.trim(),height:parseFloat(o.value.height),width:parseFloat(o.value.width),depth:o.value.depth?parseFloat(o.value.depth):void 0,material:o.value.material,withFrame:o.value.withFrame,coverIndex:c.value},r.value);p.success?s.value=!0:alert(p.error||"创建作品失败")}catch(p){console.error("创建作品失败:",p),alert("创建作品失败，请稍后重试")}finally{i.value=!1}},k=()=>{confirm("确定要重置表单吗？所有已填写的内容将丢失。")&&(o.value={title:"",creationDate:"",description:"",height:"",width:"",depth:"",material:"",withFrame:!1},r.value=[],c.value=0,t.value&&t.value.clearAll())},M=()=>{s.value=!1,a.push("/")},b=()=>{s.value=!1,k()};return se(()=>{t.value&&t.value.cleanup()}),{form:o,selectedFiles:r,coverIndex:c,submitting:i,showSuccess:s,canSubmit:m,imageUploader:t,handleFilesChange:n,handleCoverChange:l,handleSubmit:g,resetForm:k,goToGallery:M,createAnother:b}}},xs={class:"min-h-screen bg-nature-canvas"},bs={class:"bg-white shadow-frame border-b-2 border-nature-warm"},ws={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ks={class:"flex items-center justify-between"},ys={class:"flex items-center space-x-4"},_s={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Cs={class:"bg-white rounded-xl shadow-frame p-8"},As={class:"space-y-6"},Is=["disabled"],Ls={class:"text-xs text-nature-sky mt-1"},js=["disabled"],Ps=["disabled"],Ms={class:"text-xs text-nature-sky mt-1"},Ds={class:"space-y-4"},Ss={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fs={class:"flex items-center space-x-2"},Us=["disabled"],Es={class:"flex items-center space-x-2"},Bs=["disabled"],Ts={class:"flex items-center space-x-2"},zs=["disabled"],Gs={class:"space-y-4"},$s=["disabled"],qs={class:"flex items-center space-x-4 p-3 bg-nature-warm bg-opacity-20 rounded-lg"},Vs={class:"flex items-center space-x-2 cursor-pointer"},Os=["disabled"],Ns={class:"flex items-center space-x-2 cursor-pointer"},Rs=["disabled"],Hs={class:"space-y-6"},Js={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},Qs=["disabled"],Ks=["disabled"],Ws={key:0,class:"flex items-center space-x-2"},Ys={key:1},Zs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Xs={class:"bg-white rounded-xl shadow-frame p-8 max-w-md w-full text-center"},ea={class:"flex space-x-3"};function ta(a,t,o,r,c,i){const s=U("router-link"),m=U("ImageUploader");return d(),u("div",xs,[e("header",bs,[e("div",ws,[e("div",ks,[A(s,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[13]||(t[13]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),t[16]||(t[16]=e("div",null,[e("h1",{class:"text-3xl font-serif text-nature-forest"},"Upload New Artwork"),e("p",{class:"text-nature-dark mt-1"},"Create new artwork")],-1)),e("div",ys,[A(s,{to:"/admin",class:"btn-outline"},{default:j(()=>[...t[14]||(t[14]=[L(" Back to Dashboard ",-1)])]),_:1}),A(s,{to:"/",class:"btn-secondary"},{default:j(()=>[...t[15]||(t[15]=[L(" View Gallery ",-1)])]),_:1})])])])]),e("main",_s,[e("div",Cs,[e("form",{onSubmit:t[10]||(t[10]=N((...n)=>r.handleSubmit&&r.handleSubmit(...n),["prevent"])),class:"space-y-8"},[e("div",As,[t[33]||(t[33]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2"}," Basic Information ",-1)),e("div",null,[t[17]||(t[17]=e("label",{for:"title",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Title "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=n=>r.form.title=n),type:"text",required:"",maxlength:"100",class:"input-field",placeholder:"Enter artwork title",disabled:r.submitting},null,8,Is),[[S,r.form.title]]),e("p",Ls,v(r.form.title.length)+"/100 characters ",1)]),e("div",null,[t[18]||(t[18]=e("label",{for:"creationDate",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Creation Date "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{id:"creationDate","onUpdate:modelValue":t[1]||(t[1]=n=>r.form.creationDate=n),type:"date",required:"",class:"input-field",disabled:r.submitting},null,8,js),[[S,r.form.creationDate]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"description",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Description "),e("span",{class:"text-red-500"},"*")],-1)),D(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=n=>r.form.description=n),required:"",maxlength:"1000",rows:"6",class:"input-field resize-none",placeholder:"Please describe the artwork's creation background, technique features, artistic value, etc...",disabled:r.submitting},null,8,Ps),[[S,r.form.description]]),e("p",Ms,v(r.form.description.length)+"/1000 characters ",1)]),e("div",Ds,[t[26]||(t[26]=e("h3",{class:"text-lg font-serif text-nature-forest border-b border-nature-warm pb-2"},"Dimensions",-1)),e("div",Ss,[e("div",null,[t[21]||(t[21]=e("label",{for:"height",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Height "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Fs,[D(e("input",{id:"height","onUpdate:modelValue":t[3]||(t[3]=n=>r.form.height=n),type:"number",step:"0.1",min:"0",required:"",class:"input-field flex-1",placeholder:"45",disabled:r.submitting},null,8,Us),[[S,r.form.height]]),t[20]||(t[20]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])]),e("div",null,[t[23]||(t[23]=e("label",{for:"width",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Width "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Es,[D(e("input",{id:"width","onUpdate:modelValue":t[4]||(t[4]=n=>r.form.width=n),type:"number",step:"0.1",min:"0",required:"",class:"input-field flex-1",placeholder:"55",disabled:r.submitting},null,8,Bs),[[S,r.form.width]]),t[22]||(t[22]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])]),e("div",null,[t[25]||(t[25]=e("label",{for:"depth",class:"block text-sm font-medium text-nature-forest mb-2"}," Depth ",-1)),e("div",Ts,[D(e("input",{id:"depth","onUpdate:modelValue":t[5]||(t[5]=n=>r.form.depth=n),type:"number",step:"0.1",min:"0",class:"input-field flex-1",placeholder:"2.2",disabled:r.submitting},null,8,zs),[[S,r.form.depth]]),t[24]||(t[24]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])])])]),e("div",Gs,[t[32]||(t[32]=e("h3",{class:"text-lg font-serif text-nature-forest border-b border-nature-warm pb-2"},"Material Information",-1)),e("div",null,[t[28]||(t[28]=e("label",{for:"material",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Canvas Material "),e("span",{class:"text-red-500"},"*")],-1)),D(e("select",{id:"material","onUpdate:modelValue":t[6]||(t[6]=n=>r.form.material=n),required:"",class:"input-field",disabled:r.submitting},[...t[27]||(t[27]=[Z('<option value="" data-v-d76724f5>Please select canvas material</option><option value="Oil on canvas" data-v-d76724f5>Oil on canvas</option><option value="Oil on linen" data-v-d76724f5>Oil on linen</option><option value="Oil on cotton" data-v-d76724f5>Oil on cotton</option><option value="Oil on board" data-v-d76724f5>Oil on board</option><option value="Acrylic on canvas" data-v-d76724f5>Acrylic on canvas</option><option value="Mixed media" data-v-d76724f5>Mixed media</option>',7)])],8,$s),[[he,r.form.material]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-nature-forest mb-2"}," Frame ",-1)),e("div",qs,[e("label",Vs,[D(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=n=>r.form.withFrame=n),value:!0,disabled:r.submitting,class:"text-nature-forest focus:ring-nature-forest"},null,8,Os),[[ne,r.form.withFrame]]),t[29]||(t[29]=e("span",{class:"text-nature-dark font-medium"},"With frame",-1))]),e("label",Ns,[D(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=n=>r.form.withFrame=n),value:!1,disabled:r.submitting,class:"text-nature-forest focus:ring-nature-forest"},null,8,Rs),[[ne,r.form.withFrame]]),t[30]||(t[30]=e("span",{class:"text-nature-dark font-medium"},"Without frame",-1))])])])])]),e("div",Hs,[t[34]||(t[34]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2"}," Image Upload ",-1)),A(m,{ref:"imageUploader","max-files":12,"max-file-size":10*1024*1024,"accepted-types":["image/jpeg","image/png"],onFilesChange:r.handleFilesChange,onCoverChange:r.handleCoverChange},null,8,["onFilesChange","onCoverChange"]),t[35]||(t[35]=e("div",{class:"bg-nature-warm bg-opacity-30 p-4 rounded-lg"},[e("h4",{class:"font-medium text-nature-forest mb-2"},"Upload Requirements:"),e("ul",{class:"text-sm text-nature-dark space-y-1"},[e("li",null,"• Supports JPG, PNG format images"),e("li",null,"• Maximum 10MB per image"),e("li",null,"• Maximum 12 images can be uploaded"),e("li",null,"• First image will be the cover, can be manually adjusted"),e("li",null,"• Recommend uploading high-quality original images, system will automatically generate thumbnails")])],-1))]),e("div",Js,[e("button",{type:"button",onClick:t[9]||(t[9]=(...n)=>r.resetForm&&r.resetForm(...n)),class:"btn-outline",disabled:r.submitting}," Reset Form ",8,Qs),e("button",{type:"submit",disabled:r.submitting||!r.canSubmit,class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[r.submitting?(d(),u("div",Ws,[...t[36]||(t[36]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"Uploading...",-1)])])):(d(),u("span",Ys,"Create Artwork"))],8,Ks)])],32)]),r.showSuccess?(d(),u("div",Zs,[e("div",Xs,[t[37]||(t[37]=Z('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-d76724f5><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d76724f5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-d76724f5></path></svg></div><h3 class="text-xl font-serif text-nature-forest mb-2" data-v-d76724f5>Artwork Created Successfully!</h3><p class="text-nature-dark mb-6" data-v-d76724f5>Your artwork has been successfully uploaded to the gallery</p>',3)),e("div",ea,[e("button",{onClick:t[11]||(t[11]=(...n)=>r.goToGallery&&r.goToGallery(...n)),class:"btn-primary flex-1"}," View Gallery "),e("button",{onClick:t[12]||(t[12]=(...n)=>r.createAnother&&r.createAnother(...n)),class:"btn-outline flex-1"}," Continue Uploading ")])])])):y("",!0)])])}const ra=G(hs,[["render",ta],["__scopeId","data-v-d76724f5"]]);const oa={name:"EditArtworkPage",components:{ImageUploader:fe},setup(){const a=te(),t=R(),o=f(null),r=f(null),c=f(!1),i=f("edit"),s=f(!1),m=f(!1),n=f(""),l=f({title:"",creationDate:"",description:"",coverImageUrl:""}),g=f([]),k=async()=>{try{c.value=!0;const w=await fetch(`/api/artworks/${a.params.id}`),h=await w.json();w.ok?(r.value=h.artwork,l.value={title:h.artwork.title,creationDate:h.artwork.creationDate.split("T")[0],description:h.artwork.description,coverImageUrl:h.artwork.coverImage.url}):(alert("加载作品信息失败"),t.push("/admin"))}catch(w){console.error("加载作品信息失败:",w),alert("加载作品信息失败"),t.push("/admin")}finally{c.value=!1}},M=async()=>{try{s.value=!0;const w=await je(a.params.id,{title:l.value.title.trim(),creationDate:l.value.creationDate,description:l.value.description.trim(),coverImageUrl:l.value.coverImageUrl});w.success?(n.value="作品信息更新成功！",m.value=!0,await k()):alert(w.error||"更新作品信息失败")}catch(w){console.error("更新作品信息失败:",w),alert("更新作品信息失败")}finally{s.value=!1}},b=async()=>{if(g.value.length!==0)try{s.value=!0;const w=await Ie(g.value,a.params.id);w.success?(n.value="图片追加成功！",m.value=!0,await k(),g.value=[],o.value&&o.value.clearAll()):alert(w.error||"追加图片失败")}catch(w){console.error("追加图片失败:",w),alert("追加图片失败")}finally{s.value=!1}},p=async w=>{if(confirm(`确定要删除这张图片吗？
${w.url}`))try{const h=await p(a.params.id,w.url);h.success?(n.value="图片删除成功！",m.value=!0,await k()):alert(h.error||"删除图片失败")}catch(h){console.error("删除图片失败:",h),alert("删除图片失败")}},I=async()=>{if(confirm("确定要删除这个作品吗？此操作不可恢复！"))try{const w=await ue(a.params.id);w.success?(alert("作品删除成功！"),t.push("/admin")):alert(w.error||"删除作品失败")}catch(w){console.error("删除作品失败:",w),alert("删除作品失败")}},_=w=>{l.value.coverImageUrl=w.url},E=()=>{r.value&&(l.value={title:r.value.title,creationDate:r.value.creationDate.split("T")[0],description:r.value.description,coverImageUrl:r.value.coverImage.url})},V=w=>{g.value=w};return W(()=>{k()}),se(()=>{o.value&&o.value.cleanup()}),{artwork:r,loading:c,mode:i,submitting:s,showSuccess:m,successMessage:n,editForm:l,selectedFiles:g,imageUploader:o,handleUpdateInfo:M,handleAppendImages:b,deleteImage:p,confirmDelete:I,selectCoverImage:_,resetEditForm:E,handleFilesChange:V}}},sa={class:"min-h-screen bg-nature-canvas"},aa={class:"bg-white shadow-frame border-b-2 border-nature-warm"},na={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},la={class:"flex items-center justify-between"},ia={class:"text-nature-dark mt-1"},da={class:"flex items-center space-x-4"},ca={key:0,class:"flex items-center justify-center min-h-[60vh]"},ua={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ma={class:"bg-white rounded-xl shadow-frame p-6 mb-8"},fa={class:"flex space-x-4"},ga={key:0,class:"bg-white rounded-xl shadow-frame p-8 mb-8"},va=["disabled"],pa={class:"text-xs text-nature-sky mt-1"},ha=["disabled"],xa=["disabled"],ba={class:"text-xs text-nature-sky mt-1"},wa={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ka=["onClick"],ya=["src","alt"],_a={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},Ca={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},Aa=["disabled"],Ia=["disabled"],La={key:0,class:"flex items-center space-x-2"},ja={key:1},Pa={key:1,class:"bg-white rounded-xl shadow-frame p-8 mb-8"},Ma={class:"space-y-6"},Da={class:"text-lg font-medium text-nature-forest mb-4"},Sa={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Fa=["src","alt"],Ua={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},Ea=["onClick"],Ba={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},Ta=["disabled"],za={key:0,class:"flex items-center space-x-2"},Ga={key:1},$a={class:"bg-red-50 border border-red-200 rounded-xl p-6"},qa={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Va={class:"bg-white rounded-xl shadow-frame p-8 max-w-md w-full text-center"},Oa={class:"text-nature-dark mb-6"},Na={class:"flex space-x-3"};function Ra(a,t,o,r,c,i){var n;const s=U("router-link"),m=U("ImageUploader");return d(),u("div",sa,[e("header",aa,[e("div",na,[e("div",la,[A(s,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[10]||(t[10]=[e("img",{src:Y,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("div",null,[t[11]||(t[11]=e("h1",{class:"text-3xl font-serif text-nature-forest"},"Edit Artwork",-1)),e("p",ia,v(((n=r.artwork)==null?void 0:n.title)||"Loading..."),1)]),e("div",da,[A(s,{to:"/admin",class:"btn-outline"},{default:j(()=>[...t[12]||(t[12]=[L(" Back to Dashboard ",-1)])]),_:1}),A(s,{to:"/",class:"btn-secondary"},{default:j(()=>[...t[13]||(t[13]=[L(" View Gallery ",-1)])]),_:1})])])])]),r.loading?(d(),u("div",ca,[...t[14]||(t[14]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"}),e("p",{class:"text-nature-dark"},"Loading artwork information...")],-1)])])):r.artwork?(d(),u("div",ua,[e("div",ma,[t[17]||(t[17]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Operation Mode",-1)),e("div",fa,[e("button",{onClick:t[0]||(t[0]=l=>r.mode="edit"),class:z(["flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200",r.mode==="edit"?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},[...t[15]||(t[15]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),e("span",null,"Edit Artwork Info")],-1)])],2),e("button",{onClick:t[1]||(t[1]=l=>r.mode="append"),class:z(["flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200",r.mode==="append"?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},[...t[16]||(t[16]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Append Images")],-1)])],2)])]),r.mode==="edit"?(d(),u("div",ga,[t[24]||(t[24]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2 mb-6"}," Edit Artwork Information ",-1)),e("form",{onSubmit:t[6]||(t[6]=N((...l)=>r.handleUpdateInfo&&r.handleUpdateInfo(...l),["prevent"])),class:"space-y-6"},[e("div",null,[t[18]||(t[18]=e("label",{for:"title",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Title "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{id:"title","onUpdate:modelValue":t[2]||(t[2]=l=>r.editForm.title=l),type:"text",required:"",maxlength:"100",class:"input-field",placeholder:"Enter artwork title",disabled:r.submitting},null,8,va),[[S,r.editForm.title]]),e("p",pa,v(r.editForm.title.length)+"/100 characters ",1)]),e("div",null,[t[19]||(t[19]=e("label",{for:"creationDate",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Creation Date "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{id:"creationDate","onUpdate:modelValue":t[3]||(t[3]=l=>r.editForm.creationDate=l),type:"date",required:"",class:"input-field",disabled:r.submitting},null,8,ha),[[S,r.editForm.creationDate]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"description",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" 作品简介 "),e("span",{class:"text-red-500"},"*")],-1)),D(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=l=>r.editForm.description=l),required:"",maxlength:"1000",rows:"6",class:"input-field resize-none",placeholder:"请详细描述作品的创作背景、技法特点、艺术价值等...",disabled:r.submitting},null,8,xa),[[S,r.editForm.description]]),e("p",ba,v(r.editForm.description.length)+"/1000 字符 ",1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-nature-forest mb-2"}," 封面图片 ",-1)),e("div",wa,[(d(!0),u($,null,q(r.artwork.images,(l,g)=>(d(),u("div",{key:g,onClick:k=>r.selectCoverImage(l),class:z(["relative aspect-square rounded-lg overflow-hidden border-2 cursor-pointer transition-all duration-200",r.editForm.coverImageUrl===l.url?"border-nature-forest ring-2 ring-nature-forest":"border-nature-warm hover:border-nature-sky"])},[e("img",{src:l.thumbnailUrl,alt:`图片 ${g+1}`,class:"w-full h-full object-cover"},null,8,ya),r.editForm.coverImageUrl===l.url?(d(),u("div",_a," 封 ")):y("",!0)],10,ka))),128))]),t[22]||(t[22]=e("p",{class:"text-xs text-nature-sky mt-2"},"点击图片选择封面",-1))]),e("div",Ca,[e("button",{type:"button",onClick:t[5]||(t[5]=(...l)=>r.resetEditForm&&r.resetEditForm(...l)),class:"btn-outline",disabled:r.submitting}," 重置 ",8,Aa),e("button",{type:"submit",disabled:r.submitting,class:"btn-primary"},[r.submitting?(d(),u("div",La,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"更新中...",-1)])])):(d(),u("span",ja,"更新作品信息"))],8,Ia)])],32)])):y("",!0),r.mode==="append"?(d(),u("div",Pa,[t[28]||(t[28]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2 mb-6"}," 向作品追加图片 ",-1)),e("div",Ma,[e("div",null,[e("h3",Da,"当前图片 ("+v(r.artwork.images.length)+" 张)",1),e("div",Sa,[(d(!0),u($,null,q(r.artwork.images,(l,g)=>(d(),u("div",{key:g,class:"relative aspect-square rounded-lg overflow-hidden bg-nature-warm border-2 border-nature-warm"},[e("img",{src:l.thumbnailUrl,alt:`图片 ${g+1}`,class:"w-full h-full object-cover"},null,8,Fa),r.artwork.coverImage.url===l.url?(d(),u("div",Ua," 封 ")):y("",!0),e("button",{onClick:k=>r.deleteImage(l),class:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center hover:bg-red-600"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ea)]))),128))])]),e("div",null,[t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-nature-forest mb-4"},"上传新图片",-1)),A(m,{ref:"imageUploader","max-files":12,"max-file-size":10*1024*1024,"accepted-types":["image/jpeg","image/png"],onFilesChange:r.handleFilesChange},null,8,["onFilesChange"])]),e("div",Ba,[e("button",{onClick:t[7]||(t[7]=(...l)=>r.handleAppendImages&&r.handleAppendImages(...l)),disabled:r.submitting||r.selectedFiles.length===0,class:"btn-primary disabled:opacity-50"},[r.submitting?(d(),u("div",za,[...t[27]||(t[27]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"上传中...",-1)])])):(d(),u("span",Ga,"追加图片"))],8,Ta)])])])):y("",!0),e("div",$a,[t[29]||(t[29]=e("h2",{class:"text-xl font-serif text-red-700 mb-4"},"危险操作",-1)),t[30]||(t[30]=e("p",{class:"text-red-600 mb-4"}," 删除作品将永久移除所有相关图片和数据，此操作不可恢复。 ",-1)),e("button",{onClick:t[8]||(t[8]=(...l)=>r.confirmDelete&&r.confirmDelete(...l)),class:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors duration-200"}," 删除作品 ")])])):y("",!0),r.showSuccess?(d(),u("div",qa,[e("div",Va,[t[31]||(t[31]=e("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[32]||(t[32]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"操作成功！",-1)),e("p",Oa,v(r.successMessage),1),e("div",Na,[e("button",{onClick:t[9]||(t[9]=l=>r.showSuccess=!1),class:"btn-primary flex-1"}," 确定 ")])])])):y("",!0)])}const Ha=G(oa,[["render",Ra],["__scopeId","data-v-54627429"]]),Ja=[{path:"/",name:"Gallery",component:Et,meta:{title:"Gallery - Landscape Oil Painting Gallery"}},{path:"/artwork/:id",name:"ArtworkDetail",component:Fr,meta:{title:"Artwork Details - Landscape Oil Painting Gallery"}},{path:"/admin/login",name:"AdminLogin",component:Hr,meta:{title:"Admin Login - Landscape Oil Painting Gallery"}},{path:"/admin",name:"AdminDashboard",component:Wo,meta:{title:"Admin Dashboard - Landscape Oil Painting Gallery"}},{path:"/admin/artworks/new",name:"UploadNewArtwork",component:ra,meta:{title:"Upload New Artwork - Landscape Oil Painting Gallery"}},{path:"/admin/artworks/append",name:"AppendImages",component:()=>Ae(()=>import("./AppendImagesPage-3afdb758.js"),["assets/AppendImagesPage-3afdb758.js","assets/vendor-29d2aae4.js","assets/axios-b5ee139b.js","assets/AppendImagesPage-364b074d.css"]),meta:{title:"Add New Images to Existing Collection - Landscape Oil Painting Gallery"}},{path:"/admin/artworks/:id/edit",name:"EditArtwork",component:Ha,meta:{title:"Edit Artwork - Landscape Oil Painting Gallery"}},{path:"/:pathMatch(.*)*",redirect:"/"}],ge=xe({history:be(),routes:Ja,scrollBehavior(a,t,o){return o||{top:0}}});ge.beforeEach((a,t,o)=>{a.meta.title&&(document.title=a.meta.title),o()});const Qa={name:"App",setup(){const a=me(),t=re(),o=f(!1),r=f(""),c=P(()=>a.loading||t.loading),i=P(()=>a.error||t.error),s=()=>{o.value=c.value},m=()=>{r.value=i.value||""},n=()=>{r.value="",a.clearError(),t.clearError()},l=async()=>{try{await a.initAuth(),a.isAuthenticated&&await t.fetchList()}catch(g){console.error("Application initialization failed:",g)}};return W(()=>{l()}),a.$subscribe(s),t.$subscribe(s),t.$subscribe(m),{globalLoading:o,globalError:r,clearGlobalError:n}}},Ka={id:"app",class:"min-h-screen bg-nature-canvas"},Wa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ya={key:1,class:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md"},Za={class:"flex items-center justify-between"};function Xa(a,t,o,r,c,i){const s=U("router-view");return d(),u("div",Ka,[A(s),r.globalLoading?(d(),u("div",Wa,[...t[1]||(t[1]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-nature-forest"}),e("span",{class:"text-nature-dark font-medium"},"加载中...")],-1)])])):y("",!0),r.globalError?(d(),u("div",Ya,[e("div",Za,[e("span",null,v(r.globalError),1),e("button",{onClick:t[0]||(t[0]=(...m)=>r.clearGlobalError&&r.clearGlobalError(...m)),class:"ml-4 text-red-700 hover:text-red-900"},[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])):y("",!0)])}const en=G(Qa,[["render",Xa]]);const ae=we(en),tn=ke();ae.use(tn);ae.use(ge);ae.mount("#app");export{fe as I,G as _,Ie as a,Y as b,re as u};
