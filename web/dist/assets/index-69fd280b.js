import{d as de,r as f,c as M,u as J,o as d,a as c,b as e,t as v,e as T,F as O,f as $,g as ue,n as G,h as k,w as I,v as U,i as ce,j as re,s as ve,k as oe,l as Y,m as A,p as j,q as L,x as ae,y as R,z as X,A as pe,B as he,C as le,D as xe,E as be,G as we,H as ke}from"./vendor-29d2aae4.js";import{a as ye}from"./axios-b5ee139b.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const i of u)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(u){const i={};return u.integrity&&(i.integrity=u.integrity),u.referrerPolicy&&(i.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?i.credentials="include":u.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(u){if(u.ep)return;u.ep=!0;const i=s(u);fetch(u.href,i)}})();const _e="modulepreload",Ce=function(a){return"/"+a},ie={},Pe=function(t,s,r){if(!s||s.length===0)return t();const u=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=Ce(i),i in ie)return;ie[i]=!0;const o=i.endsWith(".css"),m=o?'[rel="stylesheet"]':"";if(!!r)for(let g=u.length-1;g>=0;g--){const w=u[g];if(w.href===i&&(!o||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${m}`))return;const n=document.createElement("link");if(n.rel=o?"stylesheet":_e,o||(n.as="script",n.crossOrigin=""),n.href=i,document.head.appendChild(n),o)return new Promise((g,w)=>{n.addEventListener("load",g),n.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},B=ye.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});B.interceptors.request.use(a=>{const t=localStorage.getItem("token");return t&&(a.headers.Authorization=`Bearer ${t}`),a},a=>Promise.reject(a));B.interceptors.response.use(a=>a,a=>{var t;return((t=a.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.pathname!=="/admin/login"&&(window.location.href="/admin/login")),Promise.reject(a)});const Ae=async(a,t=null)=>{var u,i;const s=new FormData;a.forEach((o,m)=>{s.append("images",o)});const r=t?`/artworks/${t}/images`:"/artworks";try{return{success:!0,data:(await B.post(r,s,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(o){return{success:!1,error:((i=(u=o.response)==null?void 0:u.data)==null?void 0:i.message)||o.message||"Upload failed"}}},Le=async(a,t)=>{var r,u;const s=new FormData;s.append("title",a.title),s.append("creationDate",a.creationDate),s.append("description",a.description),s.append("height",a.height),s.append("width",a.width),a.depth!==void 0&&s.append("depth",a.depth),s.append("material",a.material),s.append("withFrame",a.withFrame),a.coverIndex!==void 0&&s.append("coverIndex",a.coverIndex),t.forEach((i,o)=>{s.append("images",i)});try{return{success:!0,data:(await B.post("/artworks",s,{headers:{"Content-Type":"multipart/form-data"}})).data}}catch(i){return{success:!1,error:((u=(r=i.response)==null?void 0:r.data)==null?void 0:u.message)||i.message||"Failed to create artwork"}}},Ie=async(a,t)=>{var s,r;try{return{success:!0,data:(await B.patch(`/artworks/${a}`,t)).data}}catch(u){return{success:!1,error:((r=(s=u.response)==null?void 0:s.data)==null?void 0:r.message)||u.message||"Failed to update artwork"}}},me=async a=>{var t,s;try{return{success:!0,data:(await B.delete(`/artworks/${a}`)).data}}catch(r){return{success:!1,error:((s=(t=r.response)==null?void 0:t.data)==null?void 0:s.message)||r.message||"Failed to delete artwork"}}},ee=de("auth",()=>{const a=f(localStorage.getItem("token")||""),t=f(JSON.parse(localStorage.getItem("user")||"null")),s=f(!1),r=f(""),u=M(()=>!!a.value),i=M(()=>{var b;return((b=t.value)==null?void 0:b.role)==="admin"}),o=b=>{a.value=b.token,t.value=b.user,localStorage.setItem("token",b.token),localStorage.setItem("user",JSON.stringify(b.user)),B.defaults.headers.common.Authorization=`Bearer ${b.token}`},m=()=>{a.value="",t.value=null,r.value="",localStorage.removeItem("token"),localStorage.removeItem("user"),delete B.defaults.headers.common.Authorization},l=async b=>{var _,D;try{s.value=!0,r.value="";const C=await B.post("/auth/login",b);if(C.data.token)return o(C.data),{success:!0,data:C.data};throw new Error("Login response format error")}catch(C){return r.value=((D=(_=C.response)==null?void 0:_.data)==null?void 0:D.message)||C.message||"Login failed",{success:!1,error:r.value}}finally{s.value=!1}},n=()=>{const b=J();m(),b.push("/admin/login")},g=async()=>{if(!a.value)return!1;try{const b=await B.get("/auth/me");if(b.data.user)return t.value=b.data.user,localStorage.setItem("user",JSON.stringify(b.data.user)),!0}catch(b){return console.error("Token validation failed:",b),m(),!1}return!1};return{token:a,user:t,loading:s,error:r,isAuthenticated:u,isAdmin:i,setAuth:o,clearAuth:m,login:l,logout:n,validateToken:g,initAuth:async()=>{a.value&&await g()},changePassword:async b=>{var _,D;try{return s.value=!0,r.value="",{success:!0,data:(await B.patch("/auth/change-password",b)).data}}catch(C){return r.value=((D=(_=C.response)==null?void 0:_.data)==null?void 0:D.message)||C.message||"Failed to change password",{success:!1,error:r.value}}finally{s.value=!1}}}}),se=de("gallery",()=>{const a=f([]),t=f(!1),s=f(""),r=f(1),u=f(9),i=f(0),o=f(0),m=f(""),l=M(()=>r.value<o.value),n=M(()=>r.value>1),g=M(()=>!!(t.value||!a.value||a.value.length===0)),w=M(()=>r.value===1),S=M(()=>r.value===o.value),b=async(P={})=>{var K,W;try{t.value=!0,s.value="";const H={page:P.page||r.value,limit:P.limit||u.value,q:P.q!==void 0?P.q:m.value},h=await B.get("/artworks",{params:H});return a.value=h.data.items,r.value=h.data.page,u.value=h.data.limit,i.value=h.data.total,o.value=h.data.totalPages,{success:!0,data:h.data}}catch(H){return s.value=((W=(K=H.response)==null?void 0:K.data)==null?void 0:W.message)||H.message||"Failed to fetch artwork list",{success:!1,error:s.value}}finally{t.value=!1}},_=P=>P>=1&&P<=o.value?(r.value=P,!0):!1,D=()=>l.value?(r.value++,!0):!1,C=()=>n.value?(r.value--,!0):!1,F=P=>P>=1&&P<=o.value?(r.value=P,!0):!1,E=P=>{m.value=P,r.value=1};return{items:a,loading:t,error:s,page:r,limit:u,total:i,totalPages:o,searchQuery:m,hasNext:l,hasPrev:n,isEmpty:g,isFirstPage:w,isLastPage:S,fetchList:b,setPage:_,nextPage:D,prevPage:C,goToPage:F,setSearchQuery:E,search:async P=>(E(P),await b({page:1,q:P})),resetSearch:()=>{m.value="",r.value=1},fetchArtwork:async P=>{var K,W;try{return t.value=!0,s.value="",{success:!0,data:(await B.get(`/artworks/${P}`)).data}}catch(H){return s.value=((W=(K=H.response)==null?void 0:K.data)==null?void 0:W.message)||H.message||"Failed to fetch artwork details",{success:!1,error:s.value}}finally{t.value=!1}},clearError:()=>{s.value=""},reset:()=>{a.value=[],t.value=!1,s.value="",r.value=1,u.value=9,i.value=0,o.value=0,m.value=""}}});const V=(a,t)=>{const s=a.__vccOpts||a;for(const[r,u]of t)s[r]=u;return s},je={name:"ArtworkCard",props:{artwork:{type:Object,required:!0}},setup(a){const t=J();return{formatCreationDate:u=>{const i=new Date(u),o=i.getFullYear(),m=i.getMonth()+1;return`${o} 年 ${m.toString().padStart(2,"0")} 月`},navigateToDetail:()=>{t.push(`/artwork/${a.artwork._id}`)}}}},Me={class:"flip-card-inner group-hover:rotate-y-180"},Se={class:"flip-card-front"},De={class:"image-container relative overflow-hidden bg-gradient-to-br from-nature-warm to-nature-sky"},Fe=["src","alt","width","height"],Ue={class:"absolute inset-0 flex flex-col justify-end p-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0"},Ee={class:"text-2xl font-serif text-white mb-3 drop-shadow-lg"},Be={class:"info-bar bg-white/95 backdrop-blur-sm border-t border-white/20"},Te={class:"px-4 py-3"},ze={class:"text-lg font-serif text-nature-forest truncate"},qe={class:"flip-card-back"},Ge={class:"back-content bg-gradient-to-br from-nature-forest to-nature-dark text-white p-6 flex flex-col justify-center"},Ve={class:"text-2xl font-serif text-center mb-4 text-white"},Ne={class:"text-center mb-4"},Oe={class:"text-lg"},$e={class:"text-center mb-6"},Re={class:"text-sm leading-relaxed opacity-90 line-clamp-3"};function He(a,t,s,r,u,i){return d(),c("div",{class:"flip-card group cursor-pointer",onClick:t[0]||(t[0]=(...o)=>r.navigateToDetail&&r.navigateToDetail(...o))},[e("div",Me,[e("div",Se,[e("div",De,[e("img",{src:s.artwork.coverImage.thumbnailUrl,alt:`${s.artwork.title} - Oil Painting`,width:s.artwork.coverImage.width,height:s.artwork.coverImage.height,loading:"lazy",class:"w-full h-full object-cover transition-all duration-700 group-hover:scale-105"},null,8,Fe),t[2]||(t[2]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"},null,-1)),e("div",Ue,[e("h3",Ee,v(s.artwork.title),1),t[1]||(t[1]=e("div",{class:"flex items-center space-x-2 text-white/90"},[e("span",{class:"text-sm font-medium"},"View Details"),e("svg",{class:"w-4 h-4 transform group-hover:translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))]),t[3]||(t[3]=e("div",{class:"absolute inset-0 border-2 border-white/20 group-hover:border-white/40 transition-all duration-500"},null,-1)),t[4]||(t[4]=e("div",{class:"absolute top-4 right-4 w-3 h-3 bg-white/30 rounded-full group-hover:bg-white/60 transition-all duration-500"},null,-1)),t[5]||(t[5]=e("div",{class:"absolute top-8 right-4 w-2 h-2 bg-white/20 rounded-full group-hover:bg-white/40 transition-all duration-500 delay-100"},null,-1))]),e("div",Be,[e("div",Te,[e("h4",ze,v(s.artwork.title),1)])])]),e("div",qe,[e("div",Ge,[e("h3",Ve,v(s.artwork.title),1),e("div",Ne,[t[6]||(t[6]=e("div",{class:"text-nature-sky text-sm mb-2"},"Creation Date",-1)),e("div",Oe,v(r.formatCreationDate(s.artwork.creationDate)),1)]),e("div",$e,[t[7]||(t[7]=e("div",{class:"text-nature-sky text-sm mb-2"},"Description",-1)),e("p",Re,v(s.artwork.description),1)]),t[8]||(t[8]=e("div",{class:"text-center text-nature-sky text-xs opacity-70"},[e("div",{class:"flex items-center justify-center space-x-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})]),e("span",null,"Hover to view front")])],-1))])])])])}const Je=V(je,[["render",He],["__scopeId","data-v-6f54fd7b"]]);const Qe={name:"GalleryGrid",components:{ArtworkCard:Je},props:{artworks:{type:Array,required:!0}}},Ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"};function We(a,t,s,r,u,i){const o=T("ArtworkCard");return d(),c("div",Ke,[(d(!0),c(O,null,$(s.artworks,m=>(d(),ue(o,{key:m._id,artwork:m,class:"animate-fade-in"},null,8,["artwork"]))),128))])}const Ye=V(Qe,[["render",We],["__scopeId","data-v-2f81c698"]]);const Ze={name:"Pagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0},total:{type:Number,required:!0}},emits:["page-change"],setup(a){const t=f(""),s=M(()=>{const l=[],n=Math.max(2,a.currentPage-1),g=Math.min(a.totalPages-1,a.currentPage+1);for(let w=n;w<=g;w++)w>1&&w<a.totalPages&&l.push(w);return l}),r=M(()=>a.currentPage>3),u=M(()=>a.currentPage>4),i=M(()=>a.currentPage<a.totalPages-2),o=M(()=>a.currentPage<a.totalPages-3);return{jumpPage:t,visiblePages:s,showFirstPage:r,showFirstEllipsis:u,showLastPage:i,showLastEllipsis:o,handleJumpPage:()=>{const l=parseInt(t.value);l&&l>=1&&l<=a.totalPages&&(this.$emit("page-change",l),t.value="")}}}},Xe={class:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0"},et={class:"text-sm text-nature-dark"},tt={class:"flex items-center space-x-2"},rt=["disabled"],st={class:"flex items-center space-x-1"},ot={key:1,class:"px-2 text-nature-sky"},at=["onClick"],nt={key:2,class:"px-2 text-nature-sky"},lt=["disabled"],it={class:"flex items-center space-x-2"},dt=["max"];function ut(a,t,s,r,u,i){return d(),c("div",Xe,[e("div",et," Total "+v(s.total)+" artworks, Page "+v(s.currentPage)+" of "+v(s.totalPages),1),e("div",tt,[e("button",{onClick:t[0]||(t[0]=o=>a.$emit("page-change",s.currentPage-1)),disabled:s.currentPage<=1,class:G(["p-2 rounded-lg border-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",s.currentPage<=1?"border-nature-warm text-nature-sky":"border-nature-forest text-nature-forest hover:bg-nature-forest hover:text-white"])},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],10,rt),e("div",st,[r.showFirstPage?(d(),c("button",{key:0,onClick:t[1]||(t[1]=o=>a.$emit("page-change",1)),class:G(["px-3 py-2 rounded-lg border-2 transition-all duration-200",s.currentPage===1?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])}," 1 ",2)):k("",!0),r.showFirstEllipsis?(d(),c("span",ot,"...")):k("",!0),(d(!0),c(O,null,$(r.visiblePages,o=>(d(),c("button",{key:o,onClick:m=>a.$emit("page-change",o),class:G(["px-3 py-2 rounded-lg border-2 transition-all duration-200",s.currentPage===o?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},v(o),11,at))),128)),r.showLastEllipsis?(d(),c("span",nt,"...")):k("",!0),r.showLastPage?(d(),c("button",{key:3,onClick:t[2]||(t[2]=o=>a.$emit("page-change",s.totalPages)),class:G(["px-3 py-2 rounded-lg border-2 transition-all duration-200",s.currentPage===s.totalPages?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},v(s.totalPages),3)):k("",!0)]),e("button",{onClick:t[3]||(t[3]=o=>a.$emit("page-change",s.currentPage+1)),disabled:s.currentPage>=s.totalPages,class:G(["p-2 rounded-lg border-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",s.currentPage>=s.totalPages?"border-nature-warm text-nature-sky":"border-nature-forest text-nature-forest hover:bg-nature-forest hover:text-white"])},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],10,lt)]),e("div",it,[t[9]||(t[9]=e("span",{class:"text-sm text-nature-dark"},"Go to",-1)),I(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.jumpPage=o),onKeyup:t[5]||(t[5]=ce((...o)=>r.handleJumpPage&&r.handleJumpPage(...o),["enter"])),type:"number",min:"1",max:s.totalPages,class:"w-16 px-2 py-1 text-center border border-nature-warm rounded focus:border-nature-forest focus:outline-none",placeholder:"Page"},null,40,dt),[[U,r.jumpPage,void 0,{number:!0}]]),e("button",{onClick:t[6]||(t[6]=(...o)=>r.handleJumpPage&&r.handleJumpPage(...o)),class:"px-3 py-1 text-sm bg-nature-forest text-white rounded hover:bg-nature-dark transition-colors duration-200"}," 跳转 ")])])}const ct=V(Ze,[["render",ut],["__scopeId","data-v-0bd571f1"]]),Z="/assets/Jeffry Art Logo-fd78355a.png",mt={name:"GalleryPage",components:{GalleryGrid:Ye,Pagination:ct},setup(){var x;const a=re(),t=J(),s=se(),r=f(""),u=f(null),i=f(!1),{items:o,loading:m,error:l,page:n,total:g,totalPages:w,isEmpty:S}=ve(s);console.log("Store refs created:",{loading:m.value,isEmpty:S.value,itemsLength:(x=o.value)==null?void 0:x.length});const b=()=>{clearTimeout(u.value),u.value=setTimeout(()=>{_()},500)},_=async()=>{r.value.trim()?await s.search(r.value.trim()):await s.fetchList(),F()},D=async()=>{r.value="",await s.resetSearch(),await s.fetchList(),F()},C=async p=>{await s.fetchList({page:p}),F()},F=()=>{const p={};n.value>1&&(p.page=n.value),r.value&&(p.q=r.value),t.replace({query:p})},E=async()=>{await s.fetchList()};return oe(()=>a.query,p=>{p.page&&s.setPage(parseInt(p.page)),p.q&&(r.value=p.q)},{immediate:!0}),oe(n,()=>{F()}),Y(async()=>{console.log("GalleryPage mounted, starting to fetch data..."),a.query.q&&(r.value=a.query.q),a.query.page&&s.setPage(parseInt(a.query.page)),console.log("Calling galleryStore.fetchList()...");const p=await s.fetchList();console.log("fetchList result:",p),console.log("Store state after fetch:",{items:o.value,loading:m.value,error:l.value,total:g.value,isEmpty:S.value}),console.log("Direct store check:",{"galleryStore.loading":s.loading,"galleryStore.items.length":s.items.length,"galleryStore.total":s.total,"galleryStore.isEmpty":s.isEmpty}),console.log("Computed values check:",{"loading.value":m.value,"items.value":o.value,"isEmpty.value":S.value})}),{items:o,loading:m,error:l,page:n,total:g,totalPages:w,isEmpty:S,searchQuery:r,showContact:i,handleSearch:b,performSearch:_,clearSearch:D,handlePageChange:C,retryLoad:E}}},ft={class:"min-h-screen bg-nature-canvas"},gt={class:"bg-white shadow-frame border-b-2 border-nature-warm"},vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pt={class:"flex justify-between items-start mb-8"},ht={class:"flex items-center space-x-4"},xt={class:"mt-8 max-w-md mx-auto"},bt={class:"relative"},wt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},kt={key:0,class:"text-center py-12"},yt={key:1,class:"text-center py-12"},_t={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},Ct={class:"mb-3"},Pt={key:2,class:"space-y-12"},At={key:0,class:"text-center"},Lt={class:"text-nature-dark"},It={key:3,class:"text-center py-12"},jt={class:"text-nature-dark mb-6"},Mt={key:0,class:"btn-primary"},St={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Dt={class:"bg-white rounded-xl shadow-frame p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Ft={class:"flex items-center justify-between mb-6"};function Ut(a,t,s,r,u,i){const o=T("router-link"),m=T("GalleryGrid"),l=T("Pagination");return d(),c("div",ft,[e("header",gt,[e("div",vt,[e("div",pt,[A(o,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[8]||(t[8]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-16 md:h-20 w-auto object-contain"},null,-1)])]),_:1}),e("div",ht,[e("button",{onClick:t[0]||(t[0]=n=>r.showContact=!0),class:"btn-outline inline-flex items-center space-x-2"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),e("span",null,"Contact",-1)])])])]),t[11]||(t[11]=e("div",{class:"text-center"},[e("h1",{class:"text-4xl md:text-5xl font-serif text-nature-forest mb-4"}," Welcome to Jeffry Goh Art "),e("p",{class:"text-lg text-nature-dark max-w-2xl mx-auto"}," Explore the beauty of nature, feel the rhythm of art. Each artwork is a witness of time, every stroke of color is an expression of the soul. ")],-1)),e("div",xt,[e("div",bt,[I(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>r.searchQuery=n),onInput:t[2]||(t[2]=(...n)=>r.handleSearch&&r.handleSearch(...n)),onKeyup:t[3]||(t[3]=ce((...n)=>r.performSearch&&r.performSearch(...n),["enter"])),type:"text",placeholder:"Search artwork titles...",class:"input-field pr-12"},null,544),[[U,r.searchQuery]]),e("button",{onClick:t[4]||(t[4]=(...n)=>r.performSearch&&r.performSearch(...n)),class:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 text-nature-forest hover:text-nature-dark"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)])])])])])]),e("main",wt,[r.loading?(d(),c("div",kt,[...t[12]||(t[12]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"},null,-1),e("p",{class:"text-nature-dark"},"Loading artworks...",-1)])])):r.error?(d(),c("div",yt,[e("div",_t,[e("p",Ct,v(r.error),1),e("button",{onClick:t[5]||(t[5]=(...n)=>r.retryLoad&&r.retryLoad(...n)),class:"btn-primary"}," Retry ")])])):r.isEmpty?(d(),c("div",It,[t[13]||(t[13]=e("div",{class:"bg-nature-warm rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6"},[e("svg",{class:"w-12 h-12 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),t[14]||(t[14]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"No Artworks",-1)),e("p",jt,v(r.searchQuery?"No matching artworks found":"No artworks in gallery yet, please come back later"),1),r.searchQuery?(d(),c("button",Mt," Back to All Artworks ")):k("",!0)])):(d(),c("div",Pt,[r.searchQuery?(d(),c("div",At,[e("p",Lt,[L(' Search results for "'+v(r.searchQuery)+'": '+v(r.total)+" artworks found ",1),e("button",{onClick:t[6]||(t[6]=(...n)=>r.clearSearch&&r.clearSearch(...n)),class:"ml-2 text-nature-forest hover:text-nature-dark underline"}," Clear Search ")])])):k("",!0),A(m,{artworks:r.items},null,8,["artworks"]),A(l,{"current-page":r.page,"total-pages":r.totalPages,total:r.total,onPageChange:r.handlePageChange},null,8,["current-page","total-pages","total","onPageChange"])]))]),r.showContact?(d(),c("div",St,[e("div",Dt,[e("div",Ft,[t[16]||(t[16]=e("h2",{class:"text-2xl font-serif text-nature-forest"},"Contact Information",-1)),e("button",{onClick:t[7]||(t[7]=n=>r.showContact=!1),class:"text-nature-sky hover:text-nature-dark transition-colors duration-200"},[...t[15]||(t[15]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t[17]||(t[17]=e("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},[e("div",{class:"space-y-6"},[e("div",null,[e("h3",{class:"text-lg font-serif text-nature-forest mb-4"},"Get in Touch"),e("div",{class:"space-y-4"},[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Email"),e("a",{href:"mailto:goh8370641@gmail.com",class:"text-nature-sky hover:text-nature-forest transition-colors duration-200"}," goh8370641@gmail.com ")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Location"),e("p",{class:"text-nature-sky"},"Taiping, Perak, Malaysia")])]),e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-nature-forest bg-opacity-10 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])]),e("div",null,[e("p",{class:"font-medium text-nature-forest"},"Response Time"),e("p",{class:"text-nature-sky"},"Within 24 hours")])])])]),e("div",{class:"bg-nature-warm bg-opacity-30 p-4 rounded-lg"},[e("h4",{class:"font-medium text-nature-forest mb-2"},"About Taiping"),e("p",{class:"text-sm text-nature-dark leading-relaxed"}," Taiping is a historic town in Perak, Malaysia, known for its rich cultural heritage, beautiful landscapes, and vibrant art scene. It's the perfect setting for creating nature-inspired oil paintings that capture the essence of Malaysian landscapes. ")])]),e("div",{class:"space-y-4"},[e("h3",{class:"text-lg font-serif text-nature-forest"},"Location Map"),e("div",{class:"bg-nature-warm bg-opacity-20 rounded-lg p-4 h-80 relative"},[e("iframe",{src:"https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q=Taiping,Perak,Malaysia&zoom=12",width:"100%",height:"100%",style:{border:"0","border-radius":"8px"},allowfullscreen:"",loading:"lazy",referrerpolicy:"no-referrer-when-downgrade",title:"Taiping, Perak, Malaysia",class:"w-full h-full rounded-lg"}),e("div",{class:"absolute bottom-4 left-4 right-4 bg-white bg-opacity-90 backdrop-blur-sm rounded-lg p-3 shadow-lg"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("p",{class:"text-nature-forest font-medium text-sm"},"Taiping, Perak, Malaysia"),e("p",{class:"text-nature-sky text-xs"},"Historic town with beautiful landscapes")]),e("a",{href:"https://maps.google.com/?q=Taiping,Perak,Malaysia",target:"_blank",rel:"noopener noreferrer",class:"btn-primary btn-sm inline-flex items-center space-x-2 text-xs px-3 py-1"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})]),e("span",null,"Open")])])])])])],-1))])])):k("",!0)])}const Et=V(mt,[["render",Ut]]);const Bt={name:"Lightbox",props:{images:{type:Array,required:!0},currentIndex:{type:Number,required:!0},artworkTitle:{type:String,required:!0}},emits:["close","navigate"],setup(a,{emit:t}){const s=f(null),r=M(()=>a.images[a.currentIndex]||a.images[0]),u=()=>{t("close")},i=g=>{t("navigate",g)},o=()=>{const g=a.currentIndex>0?a.currentIndex-1:a.images.length-1;t("navigate",g)},m=()=>{const g=a.currentIndex<a.images.length-1?a.currentIndex+1:0;t("navigate",g)},l=g=>{switch(g.key){case"Escape":u();break;case"ArrowLeft":a.images.length>1&&o();break;case"ArrowRight":a.images.length>1&&m();break}},n=g=>{g.preventDefault()};return Y(()=>{s.value&&s.value.focus(),document.body.style.overflow="hidden",document.addEventListener("wheel",n,{passive:!1}),document.addEventListener("touchmove",n,{passive:!1})}),ae(()=>{document.body.style.overflow="",document.removeEventListener("wheel",n),document.removeEventListener("touchmove",n)}),{lightbox:s,currentImage:r,closeLightbox:u,navigateToImage:i,previousImage:o,nextImage:m,handleKeydown:l}}},Tt={class:"absolute top-4 left-4 text-white text-sm z-10"},zt={class:"bg-black bg-opacity-50 px-3 py-2 rounded-lg"},qt={class:"font-medium"},Gt={class:"text-gray-300"},Vt={class:"relative max-w-full max-h-full p-8"},Nt=["src","alt"],Ot={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2"},$t={class:"flex space-x-2"},Rt=["onClick"],Ht={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between p-4 pointer-events-none"};function Jt(a,t,s,r,u,i){return d(),c("div",{class:"fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center",onClick:t[4]||(t[4]=(...o)=>r.closeLightbox&&r.closeLightbox(...o)),onKeydown:t[5]||(t[5]=(...o)=>r.handleKeydown&&r.handleKeydown(...o)),tabindex:"0",ref:"lightbox"},[e("button",{onClick:t[0]||(t[0]=(...o)=>r.closeLightbox&&r.closeLightbox(...o)),class:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors duration-200 z-10"},[...t[6]||(t[6]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",Tt,[e("div",zt,[e("p",qt,v(s.artworkTitle),1),e("p",Gt,v(s.currentIndex+1)+" / "+v(s.images.length),1)])]),e("div",Vt,[e("img",{src:r.currentImage.url,alt:`${s.artworkTitle} - Image ${s.currentIndex+1}`,class:"max-w-full max-h-full object-contain",onClick:t[1]||(t[1]=R(()=>{},["stop"]))},null,8,Nt),e("div",Ot,[e("div",$t,[(d(!0),c(O,null,$(s.images,(o,m)=>(d(),c("button",{key:m,onClick:R(l=>r.navigateToImage(m),["stop"]),class:G(["w-3 h-3 rounded-full transition-all duration-200",m===s.currentIndex?"bg-white":"bg-white bg-opacity-40 hover:bg-opacity-60"])},null,10,Rt))),128))])])]),s.images.length>1?(d(),c("div",Ht,[e("button",{onClick:t[2]||(t[2]=R((...o)=>r.previousImage&&r.previousImage(...o),["stop"])),class:"bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200 pointer-events-auto"},[...t[7]||(t[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:t[3]||(t[3]=R((...o)=>r.nextImage&&r.nextImage(...o),["stop"])),class:"bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 transition-all duration-200 pointer-events-auto"},[...t[8]||(t[8]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])):k("",!0),t[9]||(t[9]=e("div",{class:"absolute bottom-4 right-4 text-white text-xs opacity-60"},[e("p",null,"Use ← → keys to navigate, ESC to close")],-1))],544)}const Qt=V(Bt,[["render",Jt],["__scopeId","data-v-e26975da"]]);const Kt={name:"ArtworkDetailPage",components:{Lightbox:Qt},setup(){const a=re(),t=J(),s=se(),r=f(null),u=f([]),i=f(0),o=f(!1),{loading:m,error:l}=s,n=M(()=>!r.value||!r.value.images?null:r.value.images[i.value]||r.value.images[0]),g=p=>{const y=new Date(p),N=y.getFullYear(),Q=y.getMonth()+1,P=y.getDate();return`${N} 年 ${Q.toString().padStart(2,"0")} 月 ${P.toString().padStart(2,"0")} 日`},w=p=>{p>=0&&p<r.value.images.length&&(i.value=p)},S=()=>{const p=i.value>0?i.value-1:r.value.images.length-1;w(p)},b=()=>{const p=i.value<r.value.images.length-1?i.value+1:0;w(p)},_=()=>{o.value=!0},D=()=>{o.value=!1},C=()=>{t.back()},F=p=>{t.push(`/artwork/${p}`)},E=async()=>{await x()},x=async()=>{try{const p=await s.fetchArtwork(a.params.id);p.success&&(r.value=p.data.artwork,u.value=p.data.relatedArtworks||[])}catch(p){console.error("加载作品详情失败:",p)}};return Y(()=>{x()}),{artwork:r,relatedArtworks:u,currentImageIndex:i,showLightbox:o,loading:m,error:l,currentImage:n,formatCreationDate:g,setCurrentImage:w,previousImage:S,nextImage:b,openLightbox:_,closeLightbox:D,goBack:C,navigateToArtwork:F,retryLoad:E}}},Wt={class:"min-h-screen bg-nature-canvas"},Yt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6"},Zt={class:"flex items-center justify-between"},Xt={key:0,class:"flex items-center justify-center min-h-[60vh]"},er={key:1,class:"flex items-center justify-center min-h-[60vh]"},tr={class:"text-center"},rr={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},sr={class:"mb-3"},or={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ar={class:"text-center mb-12"},nr={class:"text-3xl md:text-4xl font-serif text-nature-forest mb-4"},lr={class:"flex items-center justify-center space-x-6 text-nature-sky"},ir={class:"flex items-center"},dr={class:"flex items-center"},ur={class:"mb-12"},cr={class:"relative bg-white rounded-xl shadow-frame overflow-hidden"},mr={class:"relative aspect-[16/9] bg-nature-warm"},fr=["src","alt"],gr={key:0,class:"absolute bottom-4 left-1/2 transform -translate-x-1/2"},vr={class:"flex space-x-2"},pr=["onClick"],hr={key:0,class:"absolute inset-y-0 left-0 right-0 flex items-center justify-between p-4"},xr={key:0,class:"mt-6 flex justify-center space-x-4 overflow-x-auto"},br=["onClick"],wr=["src","alt"],kr={class:"bg-white rounded-xl shadow-frame p-8 mb-12"},yr={class:"prose prose-lg max-w-none text-nature-dark leading-relaxed"},_r={class:"whitespace-pre-wrap"},Cr={key:0,class:"mb-12"},Pr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ar=["onClick"],Lr={class:"aspect-[4/3] overflow-hidden bg-nature-warm"},Ir=["src","alt"],jr={class:"p-4"},Mr={class:"font-serif text-nature-forest mb-2 line-clamp-2"},Sr={class:"text-sm text-nature-sky"};function Dr(a,t,s,r,u,i){const o=T("router-link"),m=T("Lightbox");return d(),c("div",Wt,[e("div",Yt,[e("div",Zt,[A(o,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[5]||(t[5]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("button",{onClick:t[0]||(t[0]=(...l)=>r.goBack&&r.goBack(...l)),class:"inline-flex items-center space-x-2 text-nature-forest hover:text-nature-dark transition-colors duration-200"},[...t[6]||(t[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back to Gallery",-1)])])])]),r.loading?(d(),c("div",Xt,[...t[7]||(t[7]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"}),e("p",{class:"text-nature-dark"},"Loading artwork details...")],-1)])])):r.error?(d(),c("div",er,[e("div",tr,[e("div",rr,[e("p",sr,v(r.error),1),e("button",{onClick:t[1]||(t[1]=(...l)=>r.retryLoad&&r.retryLoad(...l)),class:"btn-primary"}," Retry ")])])])):r.artwork?(d(),c("div",or,[e("div",ar,[e("h1",nr,v(r.artwork.title),1),e("div",lr,[e("div",ir,[t[8]||(t[8]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,v(r.formatCreationDate(r.artwork.creationDate)),1)]),e("div",dr,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,v(r.artwork.images.length)+" images",1)])])]),e("div",ur,[e("div",cr,[e("div",mr,[e("img",{src:r.currentImage.url,alt:`${r.artwork.title} - 图片 ${r.currentImageIndex+1}`,class:"w-full h-full object-contain cursor-pointer",onClick:t[2]||(t[2]=(...l)=>r.openLightbox&&r.openLightbox(...l))},null,8,fr),r.artwork.images.length>1?(d(),c("div",gr,[e("div",vr,[(d(!0),c(O,null,$(r.artwork.images,(l,n)=>(d(),c("button",{key:n,onClick:g=>r.setCurrentImage(n),class:G(["w-3 h-3 rounded-full transition-all duration-200",n===r.currentImageIndex?"bg-nature-forest":"bg-white bg-opacity-60 hover:bg-opacity-80"])},null,10,pr))),128))])])):k("",!0)]),r.artwork.images.length>1?(d(),c("div",hr,[e("button",{onClick:t[3]||(t[3]=(...l)=>r.previousImage&&r.previousImage(...l)),class:"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200"},[...t[10]||(t[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:t[4]||(t[4]=(...l)=>r.nextImage&&r.nextImage(...l)),class:"bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all duration-200"},[...t[11]||(t[11]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])):k("",!0)]),r.artwork.images.length>1?(d(),c("div",xr,[(d(!0),c(O,null,$(r.artwork.images,(l,n)=>(d(),c("button",{key:n,onClick:g=>r.setCurrentImage(n),class:G(["flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-all duration-200",n===r.currentImageIndex?"border-nature-forest":"border-nature-warm hover:border-nature-sky"])},[e("img",{src:l.thumbnailUrl,alt:`${r.artwork.title} - 缩略图 ${n+1}`,class:"w-full h-full object-cover"},null,8,wr)],10,br))),128))])):k("",!0)]),e("div",kr,[t[12]||(t[12]=e("h2",{class:"text-2xl font-serif text-nature-forest mb-6"},"Artwork Description",-1)),e("div",yr,[e("p",_r,v(r.artwork.description),1)])]),r.relatedArtworks&&r.relatedArtworks.length>0?(d(),c("div",Cr,[t[13]||(t[13]=e("h2",{class:"text-2xl font-serif text-nature-forest mb-6 text-center"},"Related Artworks",-1)),e("div",Pr,[(d(!0),c(O,null,$(r.relatedArtworks,l=>(d(),c("div",{key:l._id,onClick:n=>r.navigateToArtwork(l._id),class:"card-frame overflow-hidden cursor-pointer group"},[e("div",Lr,[e("img",{src:l.coverImage.thumbnailUrl,alt:`${l.title} - 封面图片`,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"},null,8,Ir)]),e("div",jr,[e("h3",Mr,v(l.title),1),e("p",Sr,v(r.formatCreationDate(l.creationDate)),1)])],8,Ar))),128))])])):k("",!0)])):k("",!0),r.showLightbox?(d(),ue(m,{key:3,images:r.artwork.images,"current-index":r.currentImageIndex,"artwork-title":r.artwork.title,onClose:r.closeLightbox,onNavigate:r.setCurrentImage},null,8,["images","current-index","artwork-title","onClose","onNavigate"])):k("",!0)])}const Fr=V(Kt,[["render",Dr],["__scopeId","data-v-1c10906e"]]);const Ur={name:"AdminLoginPage",setup(){const a=J(),t=re(),s=ee(),r=f({username:"",password:""}),{loading:u,error:i}=s,o=async()=>{try{if((await s.login({username:r.value.username.trim(),password:r.value.password})).success){const l=t.query.redirect||"/admin";a.push(l)}}catch(m){console.error("登录失败:",m)}};return Y(()=>{if(s.isAuthenticated){const m=t.query.redirect||"/admin";a.push(m)}}),{form:r,loading:u,error:i,handleLogin:o}}},Er={class:"min-h-screen bg-nature-canvas flex items-center justify-center p-4"},Br={class:"max-w-md w-full"},Tr={class:"bg-white rounded-xl shadow-frame p-8"},zr=["disabled"],qr=["disabled"],Gr={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},Vr=["disabled"],Nr={key:0,class:"flex items-center justify-center space-x-2"},Or={key:1},$r={class:"mt-6 text-center"};function Rr(a,t,s,r,u,i){const o=T("router-link");return d(),c("div",Er,[A(o,{to:"/",class:"absolute top-6 left-6 hover:opacity-80 transition-opacity duration-200"},{default:j(()=>[...t[3]||(t[3]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("div",Br,[e("div",Tr,[t[8]||(t[8]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-3xl font-serif text-nature-forest mb-2"},"Admin Login"),e("p",{class:"text-nature-dark"},"Please enter your admin account information")],-1)),e("form",{onSubmit:t[2]||(t[2]=R((...m)=>r.handleLogin&&r.handleLogin(...m),["prevent"])),class:"space-y-6"},[e("div",null,[t[4]||(t[4]=e("label",{for:"username",class:"block text-sm font-medium text-nature-forest mb-2"}," Username ",-1)),I(e("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=m=>r.form.username=m),type:"text",required:"",class:"input-field",placeholder:"Enter username",disabled:r.loading},null,8,zr),[[U,r.form.username]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"password",class:"block text-sm font-medium text-nature-forest mb-2"}," Password ",-1)),I(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=m=>r.form.password=m),type:"password",required:"",class:"input-field",placeholder:"Enter password",disabled:r.loading},null,8,qr),[[U,r.form.password]])]),r.error?(d(),c("div",Gr,v(r.error),1)):k("",!0),e("button",{type:"submit",disabled:r.loading||!r.form.username||!r.form.password,class:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed"},[r.loading?(d(),c("div",Nr,[...t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"Logging in...",-1)])])):(d(),c("span",Or,"Login"))],8,Vr)],32),e("div",$r,[A(o,{to:"/",class:"text-nature-forest hover:text-nature-dark transition-colors duration-200"},{default:j(()=>[...t[7]||(t[7]=[L(" Back to Gallery ",-1)])]),_:1})]),t[9]||(t[9]=X('<div class="mt-6 p-4 bg-nature-warm rounded-lg" data-v-e661a328><div class="text-sm text-nature-dark" data-v-e661a328><p class="font-medium mb-2" data-v-e661a328>Default Admin Account:</p><p data-v-e661a328>Username: <code class="bg-white px-2 py-1 rounded" data-v-e661a328>admin</code></p><p data-v-e661a328>Password: <code class="bg-white px-2 py-1 rounded" data-v-e661a328>admin123</code></p><p class="text-xs mt-2 text-nature-sky" data-v-e661a328> ⚠️ Please change the default password in production environment </p></div></div>',1))])])])}const Hr=V(Ur,[["render",Rr],["__scopeId","data-v-e661a328"]]);const Jr={name:"AdminDashboard",setup(){J();const a=ee(),t=se(),s=f(!1),r=f({currentPassword:"",newPassword:""}),u=f(!1),i=f(null),o=f(!1),m=f([]),l=f(!1),n=f(""),g=f({totalArtworks:0,totalImages:0,thisMonth:0}),w=f([{id:1,message:"系统启动完成",time:new Date}]),{user:S,changePassword:b}=a,_=()=>{a.logout()},D=async()=>{try{const y=await b({currentPassword:r.value.currentPassword,newPassword:r.value.newPassword});y.success?(alert("密码修改成功"),s.value=!1,r.value={currentPassword:"",newPassword:""}):alert(y.error||"密码修改失败")}catch(y){console.error("修改密码失败:",y),alert("密码修改失败")}},C=y=>(typeof y=="string"&&(y=new Date(y)),y.toLocaleString("zh-CN")),F=async()=>{try{l.value=!0,n.value="",await t.fetchList({limit:1e3}),m.value=t.items}catch(y){console.error("加载作品列表失败:",y),n.value="加载作品列表失败"}finally{l.value=!1}},E=async()=>{try{await t.fetchList({limit:1e3}),g.value.totalArtworks=t.total,g.value.totalImages=t.items.reduce((N,Q)=>N+Q.images.length,0);const y=new Date().getMonth();g.value.thisMonth=t.items.filter(N=>new Date(N.creationDate).getMonth()===y).length}catch(y){console.error("加载统计数据失败:",y)}},x=y=>{i.value=y,u.value=!0},p=async()=>{if(i.value)try{o.value=!0;const y=await me(i.value._id);y.success?(await F(),await E(),w.value.unshift({id:Date.now(),message:`删除了作品 "${i.value.title}"`,time:new Date}),u.value=!1,i.value=null):alert(y.error||"删除作品失败")}catch(y){console.error("删除作品失败:",y),alert("删除作品失败，请稍后重试")}finally{o.value=!1}};return Y(()=>{F(),E()}),{user:S,showChangePassword:s,passwordForm:r,showDeleteConfirm:u,artworkToDelete:i,deleting:o,artworks:m,artworksLoading:l,artworksError:n,stats:g,recentActivities:w,handleLogout:_,handleChangePassword:D,loadArtworks:F,openDeleteConfirm:x,handleDeleteArtwork:p,formatTime:C}}},Qr={class:"min-h-screen bg-nature-canvas"},Kr={class:"bg-white shadow-frame border-b-2 border-nature-warm"},Wr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Yr={class:"flex items-center justify-between"},Zr={class:"text-nature-dark mt-1"},Xr={class:"flex items-center space-x-4"},es={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ts={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},rs={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-forest"},ss={class:"flex items-center"},os={class:"ml-4"},as={class:"text-2xl font-bold text-nature-forest"},ns={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-sky"},ls={class:"flex items-center"},is={class:"ml-4"},ds={class:"text-2xl font-bold text-nature-forest"},us={class:"bg-white rounded-xl shadow-frame p-6 border-l-4 border-nature-warm"},cs={class:"flex items-center"},ms={class:"ml-4"},fs={class:"text-2xl font-bold text-nature-forest"},gs={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},vs={class:"bg-white rounded-xl shadow-frame p-6"},ps={class:"space-y-3"},hs={class:"bg-white rounded-xl shadow-frame p-6"},xs={class:"space-y-3"},bs={key:0,class:"text-nature-sky text-center py-4"},ws={class:"text-sm text-nature-dark"},ks={class:"ml-auto text-xs text-nature-sky"},ys={class:"bg-white rounded-xl shadow-frame p-6 mb-8"},_s={class:"flex items-center justify-between mb-6"},Cs={key:0,class:"text-center py-8"},Ps={key:1,class:"text-center py-8"},As={class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg max-w-md mx-auto"},Ls={class:"mb-3"},Is={key:2,class:"text-center py-8"},js={key:3,class:"space-y-4"},Ms={class:"flex items-center space-x-4"},Ss={class:"w-16 h-16 rounded-lg overflow-hidden bg-white"},Ds=["src","alt"],Fs={class:"font-serif text-nature-forest font-medium"},Us={class:"text-sm text-nature-sky"},Es={class:"text-xs text-nature-dark"},Bs={class:"flex items-center space-x-2"},Ts=["onClick"],zs={class:"bg-white rounded-xl shadow-frame p-6"},qs={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Gs={class:"flex justify-between"},Vs={class:"text-nature-forest font-medium"},Ns={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Os={class:"bg-white rounded-xl shadow-frame p-6 max-w-md w-full"},$s={class:"flex space-x-3 pt-4"},Rs=["disabled"],Hs={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Js={class:"bg-white rounded-xl shadow-frame p-6 max-w-md w-full"},Qs={class:"text-center"},Ks={class:"text-nature-dark mb-6"},Ws={class:"flex space-x-3"},Ys=["disabled"],Zs={key:0,class:"flex items-center justify-center space-x-2"},Xs={key:1};function eo(a,t,s,r,u,i){var m,l;const o=T("router-link");return d(),c("div",Qr,[e("header",Kr,[e("div",Wr,[e("div",Yr,[A(o,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[9]||(t[9]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("div",null,[t[10]||(t[10]=e("h1",{class:"text-3xl font-serif text-nature-forest"},"Admin Dashboard",-1)),e("p",Zr,"Welcome back, "+v((m=r.user)==null?void 0:m.username),1)]),e("div",Xr,[e("button",{onClick:t[0]||(t[0]=n=>r.showChangePassword=!0),class:"btn-outline"}," Change Password "),e("button",{onClick:t[1]||(t[1]=(...n)=>r.handleLogout&&r.handleLogout(...n)),class:"btn-secondary"}," Logout ")])])])]),e("main",es,[e("div",ts,[e("div",rs,[e("div",ss,[t[12]||(t[12]=e("div",{class:"p-3 bg-nature-forest bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-forest",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",os,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-nature-sky"},"Total Artworks",-1)),e("p",as,v(r.stats.totalArtworks),1)])])]),e("div",ns,[e("div",ls,[t[14]||(t[14]=e("div",{class:"p-3 bg-nature-sky bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-sky",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",is,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-nature-sky"},"Total Images",-1)),e("p",ds,v(r.stats.totalImages),1)])])]),e("div",us,[e("div",cs,[t[16]||(t[16]=e("div",{class:"p-3 bg-nature-warm bg-opacity-10 rounded-lg"},[e("svg",{class:"w-8 h-8 text-nature-warm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",ms,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-nature-sky"},"This Month",-1)),e("p",fs,v(r.stats.thisMonth),1)])])])]),e("div",gs,[e("div",vs,[t[20]||(t[20]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Quick Actions",-1)),e("div",ps,[A(o,{to:"/admin/artworks/new",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[17]||(t[17]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"font-medium"},"Upload New Artwork",-1)])]),_:1}),A(o,{to:"/admin/artworks/append",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[18]||(t[18]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),e("span",{class:"font-medium"},"Add New Images to Existing Collection",-1)])]),_:1}),A(o,{to:"/",class:"flex items-center p-3 rounded-lg border-2 border-nature-warm hover:border-nature-forest hover:bg-nature-forest hover:text-white transition-all duration-200 group"},{default:j(()=>[...t[19]||(t[19]=[e("svg",{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"font-medium"},"View Gallery",-1)])]),_:1})])]),e("div",hs,[t[22]||(t[22]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Recent Activities",-1)),e("div",xs,[r.recentActivities.length===0?(d(),c("div",bs," No recent activities ")):k("",!0),(d(!0),c(O,null,$(r.recentActivities,n=>(d(),c("div",{key:n.id,class:"flex items-center p-3 rounded-lg bg-nature-warm bg-opacity-30"},[t[21]||(t[21]=e("div",{class:"w-2 h-2 bg-nature-forest rounded-full mr-3"},null,-1)),e("span",ws,v(n.message),1),e("span",ks,v(r.formatTime(n.time)),1)]))),128))])])]),e("div",ys,[e("div",_s,[t[24]||(t[24]=e("h2",{class:"text-xl font-serif text-nature-forest"},"Artwork Management",-1)),A(o,{to:"/admin/artworks/new",class:"btn-primary"},{default:j(()=>[...t[23]||(t[23]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),L(" Upload New Artwork ",-1)])]),_:1})]),r.artworksLoading?(d(),c("div",Cs,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-nature-forest mx-auto mb-4"},null,-1),e("p",{class:"text-nature-dark"},"Loading artworks...",-1)])])):r.artworksError?(d(),c("div",Ps,[e("div",As,[e("p",Ls,v(r.artworksError),1),e("button",{onClick:t[2]||(t[2]=(...n)=>r.loadArtworks&&r.loadArtworks(...n)),class:"btn-primary"},"Retry")])])):r.artworks.length===0?(d(),c("div",Is,[t[27]||(t[27]=X('<div class="bg-nature-warm rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4" data-v-d051f165><svg class="w-8 h-8 text-nature-forest" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-d051f165><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-d051f165></path></svg></div><h3 class="text-lg font-serif text-nature-forest mb-2" data-v-d051f165>No Artworks</h3><p class="text-nature-dark mb-4" data-v-d051f165>No artworks in the gallery yet, please create one first</p>',3)),A(o,{to:"/admin/artworks/new",class:"btn-primary"},{default:j(()=>[...t[26]||(t[26]=[L(" Create First Artwork ",-1)])]),_:1})])):(d(),c("div",js,[(d(!0),c(O,null,$(r.artworks,n=>(d(),c("div",{key:n._id,class:"flex items-center justify-between p-4 bg-nature-warm bg-opacity-20 rounded-lg border border-nature-warm"},[e("div",Ms,[e("div",Ss,[e("img",{src:n.coverImage.thumbnailUrl,alt:n.title,class:"w-full h-full object-cover"},null,8,Ds)]),e("div",null,[e("h3",Fs,v(n.title),1),e("p",Us,v(r.formatTime(n.creationDate)),1),e("p",Es,v(n.images.length)+" images",1)])]),e("div",Bs,[A(o,{to:`/artwork/${n._id}`,class:"btn-outline px-3 py-2 text-sm"},{default:j(()=>[...t[28]||(t[28]=[L(" View ",-1)])]),_:2},1032,["to"]),A(o,{to:`/admin/artworks/${n._id}/edit`,class:"btn-secondary px-3 py-2 text-sm"},{default:j(()=>[...t[29]||(t[29]=[L(" Edit ",-1)])]),_:2},1032,["to"]),e("button",{onClick:g=>r.openDeleteConfirm(n),class:"btn-danger px-3 py-2 text-sm"}," Delete ",8,Ts)])]))),128))]))]),e("div",zs,[t[32]||(t[32]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"System Information",-1)),e("div",qs,[t[31]||(t[31]=X('<div class="flex justify-between" data-v-d051f165><span class="text-nature-dark" data-v-d051f165>System Version:</span><span class="text-nature-forest font-medium" data-v-d051f165>v1.0.0</span></div><div class="flex justify-between" data-v-d051f165><span class="text-nature-dark" data-v-d051f165>Database Status:</span><span class="text-green-600 font-medium" data-v-d051f165>Normal</span></div><div class="flex justify-between" data-v-d051f165><span class="text-nature-dark" data-v-d051f165>Upload Directory:</span><span class="text-nature-forest font-medium" data-v-d051f165>/uploads</span></div>',3)),e("div",Gs,[t[30]||(t[30]=e("span",{class:"text-nature-dark"},"Last Update:",-1)),e("span",Vs,v(r.formatTime(new Date)),1)])])])]),r.showChangePassword?(d(),c("div",Ns,[e("div",Os,[t[35]||(t[35]=e("h3",{class:"text-xl font-serif text-nature-forest mb-4"},"Change Password",-1)),e("form",{onSubmit:t[6]||(t[6]=R((...n)=>r.handleChangePassword&&r.handleChangePassword(...n),["prevent"])),class:"space-y-4"},[e("div",null,[t[33]||(t[33]=e("label",{for:"currentPassword",class:"block text-sm font-medium text-nature-forest mb-2"}," Current Password ",-1)),I(e("input",{id:"currentPassword","onUpdate:modelValue":t[3]||(t[3]=n=>r.passwordForm.currentPassword=n),type:"password",required:"",class:"input-field",placeholder:"Enter current password"},null,512),[[U,r.passwordForm.currentPassword]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"newPassword",class:"block text-sm font-medium text-nature-forest mb-2"}," New Password ",-1)),I(e("input",{id:"newPassword","onUpdate:modelValue":t[4]||(t[4]=n=>r.passwordForm.newPassword=n),type:"password",required:"",class:"input-field",placeholder:"Enter new password",minlength:"6"},null,512),[[U,r.passwordForm.newPassword]])]),e("div",$s,[e("button",{type:"button",onClick:t[5]||(t[5]=n=>r.showChangePassword=!1),class:"btn-secondary flex-1"}," Cancel "),e("button",{type:"submit",disabled:!r.passwordForm.currentPassword||!r.passwordForm.newPassword,class:"btn-primary flex-1 disabled:opacity-50"}," Confirm Change ",8,Rs)])],32)])])):k("",!0),r.showDeleteConfirm?(d(),c("div",Hs,[e("div",Js,[e("div",Qs,[t[37]||(t[37]=e("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[38]||(t[38]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"Confirm Delete Artwork",-1)),e("p",Ks,' Are you sure you want to delete the artwork "'+v((l=r.artworkToDelete)==null?void 0:l.title)+'"? This action cannot be undone, all images will be permanently deleted. ',1),e("div",Ws,[e("button",{onClick:t[7]||(t[7]=n=>r.showDeleteConfirm=!1),class:"btn-secondary flex-1"}," Cancel "),e("button",{onClick:t[8]||(t[8]=(...n)=>r.handleDeleteArtwork&&r.handleDeleteArtwork(...n)),disabled:r.deleting,class:"btn-danger flex-1 disabled:opacity-50"},[r.deleting?(d(),c("div",Zs,[...t[36]||(t[36]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1),e("span",null,"Deleting...",-1)])])):(d(),c("span",Xs,"Confirm Delete"))],8,Ys)])])])])):k("",!0)])}const to=V(Jr,[["render",eo],["__scopeId","data-v-d051f165"]]);const ro={name:"ImageUploader",props:{maxFiles:{type:Number,default:12},maxFileSize:{type:Number,default:10*1024*1024},acceptedTypes:{type:Array,default:()=>["image/jpeg","image/png"]}},emits:["files-change","cover-change"],setup(a,{emit:t}){const s=f(null),r=f([]),u=f(0),i=f(""),o=f(!1),m=f(!1),l=f(0),n=f(0),g=M(()=>n.value===0?0:Math.round(l.value/n.value*100)),w=()=>{var h;(h=s.value)==null||h.click()},S=h=>{const z=Array.from(h.target.files);C(z),h.target.value=""},b=h=>{o.value=!1;const z=Array.from(h.dataTransfer.files);C(z)},_=h=>{h.preventDefault(),o.value=!0},D=h=>{h.preventDefault(),o.value=!0},C=h=>{if(i.value="",r.value.length+h.length>a.maxFiles){i.value=`最多只能选择 ${a.maxFiles} 张图片`;return}const z=[];for(const q of h){if(!a.acceptedTypes.includes(q.type)){i.value=`不支持的文件类型: ${q.name}`;continue}if(q.size>a.maxFileSize){i.value=`文件过大: ${q.name} (${y(q.size)})`;continue}const te=URL.createObjectURL(q);z.push({file:q,name:q.name,size:q.size,type:q.type,preview:te})}z.length>0&&(r.value.push(...z),N())},F=h=>{URL.revokeObjectURL(r.value[h].preview),r.value.splice(h,1),u.value>=r.value.length&&(u.value=Math.max(0,r.value.length-1)),N()},E=h=>{u.value=h,t("cover-change",h)},x=()=>{r.value.forEach(h=>{URL.revokeObjectURL(h.preview)}),r.value=[],u.value=0,i.value="",N()},p=()=>{alert("拖拽排序功能开发中...")},y=h=>{if(h===0)return"0 Bytes";const z=1024,q=["Bytes","KB","MB","GB"],te=Math.floor(Math.log(h)/Math.log(z));return parseFloat((h/Math.pow(z,te)).toFixed(2))+" "+q[te]},N=()=>{t("files-change",r.value.map(h=>h.file))},Q=(h,z=0)=>{h.value=h,n.value=z,l.value=0},P=h=>{l.value=h},K=()=>u.value,W=()=>r.value.map(h=>h.file);return oe(r,()=>{N()},{deep:!0}),{fileInput:s,selectedFiles:r,coverIndex:u,error:i,isDragOver:o,uploading:m,uploadedCount:l,totalCount:n,uploadProgress:g,triggerFileInput:w,handleFileSelect:S,handleDrop:b,handleDragOver:_,handleDragEnter:D,removeFile:F,setCoverImage:E,clearAll:x,reorderFiles:p,formatFileSize:y,setUploading:Q,updateProgress:P,getCoverIndex:K,getSelectedFiles:W,cleanup:()=>{r.value.forEach(h=>{URL.revokeObjectURL(h.preview)})}}}},so={class:"space-y-4"},oo={class:"space-y-3"},ao={class:"text-lg font-medium text-nature-forest"},no={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg"},lo={key:1,class:"space-y-3"},io={class:"flex items-center justify-between text-sm text-nature-dark"},uo={class:"w-full bg-nature-warm rounded-full h-2"},co={key:2,class:"space-y-4"},mo={class:"text-lg font-medium text-nature-forest"},fo={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},go={class:"aspect-square rounded-lg overflow-hidden bg-nature-warm border-2 border-nature-warm"},vo=["src","alt"],po=["onClick"],ho={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},xo={class:"mt-2 text-xs text-nature-dark"},bo={class:"font-medium truncate"},wo=["onClick"],ko={class:"flex space-x-3 pt-4"};function yo(a,t,s,r,u,i){return d(),c("div",so,[e("div",{onDrop:t[1]||(t[1]=(...o)=>r.handleDrop&&r.handleDrop(...o)),onDragover:t[2]||(t[2]=R(()=>{},["prevent"])),onDragenter:t[3]||(t[3]=R(()=>{},["prevent"])),onClick:t[4]||(t[4]=(...o)=>r.triggerFileInput&&r.triggerFileInput(...o)),class:G(["border-2 border-dashed border-nature-warm rounded-lg p-8 text-center cursor-pointer hover:border-nature-forest hover:bg-nature-warm hover:bg-opacity-10 transition-all duration-200",{"border-nature-forest bg-nature-forest bg-opacity-5":r.isDragOver}])},[e("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/jpeg,image/png",class:"hidden",onChange:t[0]||(t[0]=(...o)=>r.handleFileSelect&&r.handleFileSelect(...o))},null,544),e("div",oo,[t[8]||(t[8]=e("svg",{class:"w-12 h-12 text-nature-forest mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),e("div",null,[e("p",ao,v(r.isDragOver?"Drop files to upload":"Click or drag images here"),1),t[7]||(t[7]=e("p",{class:"text-sm text-nature-sky mt-1"}," Supports JPG, PNG format, max 10MB per image, max 12 images ",-1))])])],34),r.error?(d(),c("div",no,v(r.error),1)):k("",!0),r.uploading?(d(),c("div",lo,[e("div",io,[t[9]||(t[9]=e("span",null,"Uploading...",-1)),e("span",null,v(r.uploadedCount)+" / "+v(r.totalCount),1)]),e("div",uo,[e("div",{class:"bg-nature-forest h-2 rounded-full transition-all duration-300",style:pe({width:`${r.uploadProgress}%`})},null,4)])])):k("",!0),r.selectedFiles.length>0?(d(),c("div",co,[e("h3",mo,"Selected Images ("+v(r.selectedFiles.length)+")",1),e("div",fo,[(d(!0),c(O,null,$(r.selectedFiles,(o,m)=>(d(),c("div",{key:m,class:"relative group"},[e("div",go,[e("img",{src:o.preview,alt:`Preview image ${m+1}`,class:"w-full h-full object-cover"},null,8,vo),e("button",{onClick:l=>r.removeFile(m),class:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center hover:bg-red-600"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,po),r.coverIndex===m?(d(),c("div",ho," Cover ")):k("",!0)]),e("div",xo,[e("p",bo,v(o.name),1),e("p",null,v(r.formatFileSize(o.size)),1)]),r.coverIndex!==m?(d(),c("button",{key:0,onClick:l=>r.setCoverImage(m),class:"mt-2 w-full text-xs bg-nature-warm text-nature-forest py-1 px-2 rounded hover:bg-nature-forest hover:text-white transition-colors duration-200"}," 设为封面 ",8,wo)):k("",!0)]))),128))]),e("div",ko,[e("button",{onClick:t[5]||(t[5]=(...o)=>r.clearAll&&r.clearAll(...o)),class:"btn-outline text-sm"}," 清空所有 "),e("button",{onClick:t[6]||(t[6]=(...o)=>r.reorderFiles&&r.reorderFiles(...o)),class:"btn-secondary text-sm"}," 重新排序 ")])])):k("",!0)])}const fe=V(ro,[["render",yo],["__scopeId","data-v-0bd7b0b0"]]);const _o={name:"UploadNewArtworkPage",components:{ImageUploader:fe},setup(){const a=J(),t=f(null),s=f({title:"",creationDate:"",description:"",height:"",width:"",depth:"",material:"",withFrame:!1}),r=f([]),u=f(0),i=f(!1),o=f(!1),m=M(()=>s.value.title.trim()&&s.value.creationDate&&s.value.description.trim()&&s.value.height&&s.value.width&&s.value.material&&r.value.length>0),l=_=>{r.value=_},n=_=>{u.value=_},g=async()=>{if(m.value)try{i.value=!0;const _=await Le({title:s.value.title.trim(),creationDate:s.value.creationDate,description:s.value.description.trim(),height:parseFloat(s.value.height),width:parseFloat(s.value.width),depth:s.value.depth?parseFloat(s.value.depth):void 0,material:s.value.material,withFrame:s.value.withFrame,coverIndex:u.value},r.value);_.success?o.value=!0:alert(_.error||"创建作品失败")}catch(_){console.error("创建作品失败:",_),alert("创建作品失败，请稍后重试")}finally{i.value=!1}},w=()=>{confirm("确定要重置表单吗？所有已填写的内容将丢失。")&&(s.value={title:"",creationDate:"",description:"",height:"",width:"",depth:"",material:"",withFrame:!1},r.value=[],u.value=0,t.value&&t.value.clearAll())},S=()=>{o.value=!1,a.push("/")},b=()=>{o.value=!1,w()};return ae(()=>{t.value&&t.value.cleanup()}),{form:s,selectedFiles:r,coverIndex:u,submitting:i,showSuccess:o,canSubmit:m,imageUploader:t,handleFilesChange:l,handleCoverChange:n,handleSubmit:g,resetForm:w,goToGallery:S,createAnother:b}}},Co={class:"min-h-screen bg-nature-canvas"},Po={class:"bg-white shadow-frame border-b-2 border-nature-warm"},Ao={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Lo={class:"flex items-center justify-between"},Io={class:"flex items-center space-x-4"},jo={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Mo={class:"bg-white rounded-xl shadow-frame p-8"},So={class:"space-y-6"},Do=["disabled"],Fo={class:"text-xs text-nature-sky mt-1"},Uo=["disabled"],Eo=["disabled"],Bo={class:"text-xs text-nature-sky mt-1"},To={class:"space-y-4"},zo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},qo={class:"flex items-center space-x-2"},Go=["disabled"],Vo={class:"flex items-center space-x-2"},No=["disabled"],Oo={class:"flex items-center space-x-2"},$o=["disabled"],Ro={class:"space-y-4"},Ho=["disabled"],Jo={class:"flex items-center space-x-4 p-3 bg-nature-warm bg-opacity-20 rounded-lg"},Qo={class:"flex items-center space-x-2 cursor-pointer"},Ko=["disabled"],Wo={class:"flex items-center space-x-2 cursor-pointer"},Yo=["disabled"],Zo={class:"space-y-6"},Xo={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},ea=["disabled"],ta=["disabled"],ra={key:0,class:"flex items-center space-x-2"},sa={key:1},oa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},aa={class:"bg-white rounded-xl shadow-frame p-8 max-w-md w-full text-center"},na={class:"flex space-x-3"};function la(a,t,s,r,u,i){const o=T("router-link"),m=T("ImageUploader");return d(),c("div",Co,[e("header",Po,[e("div",Ao,[e("div",Lo,[A(o,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[13]||(t[13]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),t[16]||(t[16]=e("div",null,[e("h1",{class:"text-3xl font-serif text-nature-forest"},"Upload New Artwork"),e("p",{class:"text-nature-dark mt-1"},"Create new artwork")],-1)),e("div",Io,[A(o,{to:"/admin",class:"btn-outline"},{default:j(()=>[...t[14]||(t[14]=[L(" Back to Dashboard ",-1)])]),_:1}),A(o,{to:"/",class:"btn-secondary"},{default:j(()=>[...t[15]||(t[15]=[L(" View Gallery ",-1)])]),_:1})])])])]),e("main",jo,[e("div",Mo,[e("form",{onSubmit:t[10]||(t[10]=R((...l)=>r.handleSubmit&&r.handleSubmit(...l),["prevent"])),class:"space-y-8"},[e("div",So,[t[33]||(t[33]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2"}," Basic Information ",-1)),e("div",null,[t[17]||(t[17]=e("label",{for:"title",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Title "),e("span",{class:"text-red-500"},"*")],-1)),I(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=l=>r.form.title=l),type:"text",required:"",maxlength:"100",class:"input-field",placeholder:"Enter artwork title",disabled:r.submitting},null,8,Do),[[U,r.form.title]]),e("p",Fo,v(r.form.title.length)+"/100 characters ",1)]),e("div",null,[t[18]||(t[18]=e("label",{for:"creationDate",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Creation Date "),e("span",{class:"text-red-500"},"*")],-1)),I(e("input",{id:"creationDate","onUpdate:modelValue":t[1]||(t[1]=l=>r.form.creationDate=l),type:"date",required:"",class:"input-field",disabled:r.submitting},null,8,Uo),[[U,r.form.creationDate]])]),e("div",null,[t[19]||(t[19]=e("label",{for:"description",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Description "),e("span",{class:"text-red-500"},"*")],-1)),I(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=l=>r.form.description=l),required:"",maxlength:"1000",rows:"6",class:"input-field resize-none",placeholder:"Please describe the artwork's creation background, technique features, artistic value, etc...",disabled:r.submitting},null,8,Eo),[[U,r.form.description]]),e("p",Bo,v(r.form.description.length)+"/1000 characters ",1)]),e("div",To,[t[26]||(t[26]=e("h3",{class:"text-lg font-serif text-nature-forest border-b border-nature-warm pb-2"},"Dimensions",-1)),e("div",zo,[e("div",null,[t[21]||(t[21]=e("label",{for:"height",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Height "),e("span",{class:"text-red-500"},"*")],-1)),e("div",qo,[I(e("input",{id:"height","onUpdate:modelValue":t[3]||(t[3]=l=>r.form.height=l),type:"number",step:"0.1",min:"0",required:"",class:"input-field flex-1",placeholder:"45",disabled:r.submitting},null,8,Go),[[U,r.form.height]]),t[20]||(t[20]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])]),e("div",null,[t[23]||(t[23]=e("label",{for:"width",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Width "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Vo,[I(e("input",{id:"width","onUpdate:modelValue":t[4]||(t[4]=l=>r.form.width=l),type:"number",step:"0.1",min:"0",required:"",class:"input-field flex-1",placeholder:"55",disabled:r.submitting},null,8,No),[[U,r.form.width]]),t[22]||(t[22]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])]),e("div",null,[t[25]||(t[25]=e("label",{for:"depth",class:"block text-sm font-medium text-nature-forest mb-2"}," Depth ",-1)),e("div",Oo,[I(e("input",{id:"depth","onUpdate:modelValue":t[5]||(t[5]=l=>r.form.depth=l),type:"number",step:"0.1",min:"0",class:"input-field flex-1",placeholder:"2.2",disabled:r.submitting},null,8,$o),[[U,r.form.depth]]),t[24]||(t[24]=e("span",{class:"text-nature-dark font-medium"},"cm",-1))])])])]),e("div",Ro,[t[32]||(t[32]=e("h3",{class:"text-lg font-serif text-nature-forest border-b border-nature-warm pb-2"},"Material Information",-1)),e("div",null,[t[28]||(t[28]=e("label",{for:"material",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Canvas Material "),e("span",{class:"text-red-500"},"*")],-1)),I(e("select",{id:"material","onUpdate:modelValue":t[6]||(t[6]=l=>r.form.material=l),required:"",class:"input-field",disabled:r.submitting},[...t[27]||(t[27]=[X('<option value="" data-v-8b2d2f69>Please select canvas material</option><option value="Oil on canvas" data-v-8b2d2f69>Oil on canvas</option><option value="Oil on linen" data-v-8b2d2f69>Oil on linen</option><option value="Oil on cotton" data-v-8b2d2f69>Oil on cotton</option><option value="Oil on board" data-v-8b2d2f69>Oil on board</option><option value="Acrylic on canvas" data-v-8b2d2f69>Acrylic on canvas</option><option value="Mixed media" data-v-8b2d2f69>Mixed media</option>',7)])],8,Ho),[[he,r.form.material]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-nature-forest mb-2"}," Frame ",-1)),e("div",Jo,[e("label",Qo,[I(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=l=>r.form.withFrame=l),value:!0,disabled:r.submitting,class:"text-nature-forest focus:ring-nature-forest"},null,8,Ko),[[le,r.form.withFrame]]),t[29]||(t[29]=e("span",{class:"text-nature-dark font-medium"},"With frame",-1))]),e("label",Wo,[I(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=l=>r.form.withFrame=l),value:!1,disabled:r.submitting,class:"text-nature-forest focus:ring-nature-forest"},null,8,Yo),[[le,r.form.withFrame]]),t[30]||(t[30]=e("span",{class:"text-nature-dark font-medium"},"Without frame",-1))])])])])]),e("div",Zo,[t[34]||(t[34]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2"}," Image Upload ",-1)),A(m,{ref:"imageUploader","max-files":12,"max-file-size":10*1024*1024,"accepted-types":["image/jpeg","image/png"],onFilesChange:r.handleFilesChange,onCoverChange:r.handleCoverChange},null,8,["onFilesChange","onCoverChange"]),t[35]||(t[35]=e("div",{class:"bg-nature-warm bg-opacity-30 p-4 rounded-lg"},[e("h4",{class:"font-medium text-nature-forest mb-2"},"Upload Requirements:"),e("ul",{class:"text-sm text-nature-dark space-y-1"},[e("li",null,"• Supports JPG, PNG format images"),e("li",null,"• Maximum 10MB per image"),e("li",null,"• Maximum 12 images can be uploaded"),e("li",null,"• First image will be the cover, can be manually adjusted"),e("li",null,"• Recommend uploading high-quality original images, system will automatically generate thumbnails")])],-1))]),e("div",Xo,[e("button",{type:"button",onClick:t[9]||(t[9]=(...l)=>r.resetForm&&r.resetForm(...l)),class:"btn-outline",disabled:r.submitting}," Reset Form ",8,ea),e("button",{type:"submit",disabled:r.submitting||!r.canSubmit,class:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed"},[r.submitting?(d(),c("div",ra,[...t[36]||(t[36]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"Uploading...",-1)])])):(d(),c("span",sa,"Create Artwork"))],8,ta)])],32)]),r.showSuccess?(d(),c("div",oa,[e("div",aa,[t[37]||(t[37]=X('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-8b2d2f69><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-8b2d2f69><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-8b2d2f69></path></svg></div><h3 class="text-xl font-serif text-nature-forest mb-2" data-v-8b2d2f69>Artwork Created Successfully!</h3><p class="text-nature-dark mb-6" data-v-8b2d2f69>Your artwork has been successfully uploaded to the gallery</p>',3)),e("div",na,[e("button",{onClick:t[11]||(t[11]=(...l)=>r.goToGallery&&r.goToGallery(...l)),class:"btn-primary flex-1"}," View Gallery "),e("button",{onClick:t[12]||(t[12]=(...l)=>r.createAnother&&r.createAnother(...l)),class:"btn-outline flex-1"}," Continue Uploading ")])])])):k("",!0)])])}const ia=V(_o,[["render",la],["__scopeId","data-v-8b2d2f69"]]);const da={name:"EditArtworkPage",components:{ImageUploader:fe},setup(){const a=re(),t=J(),s=f(null),r=f(null),u=f(!1),i=f("edit"),o=f(!1),m=f(!1),l=f(""),n=f({title:"",creationDate:"",description:"",coverImageUrl:""}),g=f([]),w=async()=>{try{u.value=!0;const x=await fetch(`/api/artworks/${a.params.id}`),p=await x.json();x.ok?(r.value=p.artwork,n.value={title:p.artwork.title,creationDate:p.artwork.creationDate.split("T")[0],description:p.artwork.description,coverImageUrl:p.artwork.coverImage.url}):(alert("加载作品信息失败"),t.push("/admin"))}catch(x){console.error("加载作品信息失败:",x),alert("加载作品信息失败"),t.push("/admin")}finally{u.value=!1}},S=async()=>{try{o.value=!0;const x=await Ie(a.params.id,{title:n.value.title.trim(),creationDate:n.value.creationDate,description:n.value.description.trim(),coverImageUrl:n.value.coverImageUrl});x.success?(l.value="作品信息更新成功！",m.value=!0,await w()):alert(x.error||"更新作品信息失败")}catch(x){console.error("更新作品信息失败:",x),alert("更新作品信息失败")}finally{o.value=!1}},b=async()=>{if(g.value.length!==0)try{o.value=!0;const x=await Ae(g.value,a.params.id);x.success?(l.value="图片追加成功！",m.value=!0,await w(),g.value=[],s.value&&s.value.clearAll()):alert(x.error||"追加图片失败")}catch(x){console.error("追加图片失败:",x),alert("追加图片失败")}finally{o.value=!1}},_=async x=>{if(confirm(`确定要删除这张图片吗？
${x.url}`))try{const p=await _(a.params.id,x.url);p.success?(l.value="图片删除成功！",m.value=!0,await w()):alert(p.error||"删除图片失败")}catch(p){console.error("删除图片失败:",p),alert("删除图片失败")}},D=async()=>{if(confirm("确定要删除这个作品吗？此操作不可恢复！"))try{const x=await me(a.params.id);x.success?(alert("作品删除成功！"),t.push("/admin")):alert(x.error||"删除作品失败")}catch(x){console.error("删除作品失败:",x),alert("删除作品失败")}},C=x=>{n.value.coverImageUrl=x.url},F=()=>{r.value&&(n.value={title:r.value.title,creationDate:r.value.creationDate.split("T")[0],description:r.value.description,coverImageUrl:r.value.coverImage.url})},E=x=>{g.value=x};return Y(()=>{w()}),ae(()=>{s.value&&s.value.cleanup()}),{artwork:r,loading:u,mode:i,submitting:o,showSuccess:m,successMessage:l,editForm:n,selectedFiles:g,imageUploader:s,handleUpdateInfo:S,handleAppendImages:b,deleteImage:_,confirmDelete:D,selectCoverImage:C,resetEditForm:F,handleFilesChange:E}}},ua={class:"min-h-screen bg-nature-canvas"},ca={class:"bg-white shadow-frame border-b-2 border-nature-warm"},ma={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},fa={class:"flex items-center justify-between"},ga={class:"text-nature-dark mt-1"},va={class:"flex items-center space-x-4"},pa={key:0,class:"flex items-center justify-center min-h-[60vh]"},ha={key:1,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xa={class:"bg-white rounded-xl shadow-frame p-6 mb-8"},ba={class:"flex space-x-4"},wa={key:0,class:"bg-white rounded-xl shadow-frame p-8 mb-8"},ka=["disabled"],ya={class:"text-xs text-nature-sky mt-1"},_a=["disabled"],Ca=["disabled"],Pa={class:"text-xs text-nature-sky mt-1"},Aa={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},La=["onClick"],Ia=["src","alt"],ja={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},Ma={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},Sa=["disabled"],Da=["disabled"],Fa={key:0,class:"flex items-center space-x-2"},Ua={key:1},Ea={key:1,class:"bg-white rounded-xl shadow-frame p-8 mb-8"},Ba={class:"space-y-6"},Ta={class:"text-lg font-medium text-nature-forest mb-4"},za={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},qa=["src","alt"],Ga={key:0,class:"absolute top-2 left-2 w-6 h-6 bg-nature-forest text-white rounded-full flex items-center justify-center text-xs font-bold"},Va=["onClick"],Na={class:"flex justify-end space-x-4 pt-6 border-t border-nature-warm"},Oa=["disabled"],$a={key:0,class:"flex items-center space-x-2"},Ra={key:1},Ha={class:"bg-red-50 border border-red-200 rounded-xl p-6"},Ja={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Qa={class:"bg-white rounded-xl shadow-frame p-8 max-w-md w-full text-center"},Ka={class:"text-nature-dark mb-6"},Wa={class:"flex space-x-3"};function Ya(a,t,s,r,u,i){var l;const o=T("router-link"),m=T("ImageUploader");return d(),c("div",ua,[e("header",ca,[e("div",ma,[e("div",fa,[A(o,{to:"/",class:"flex-shrink-0 hover:opacity-80 transition-opacity duration-200 mr-6"},{default:j(()=>[...t[10]||(t[10]=[e("img",{src:Z,alt:"Jeffry Goh Art Logo",class:"h-12 md:h-16 w-auto object-contain"},null,-1)])]),_:1}),e("div",null,[t[11]||(t[11]=e("h1",{class:"text-3xl font-serif text-nature-forest"},"Edit Artwork",-1)),e("p",ga,v(((l=r.artwork)==null?void 0:l.title)||"Loading..."),1)]),e("div",va,[A(o,{to:"/admin",class:"btn-outline"},{default:j(()=>[...t[12]||(t[12]=[L(" Back to Dashboard ",-1)])]),_:1}),A(o,{to:"/",class:"btn-secondary"},{default:j(()=>[...t[13]||(t[13]=[L(" View Gallery ",-1)])]),_:1})])])])]),r.loading?(d(),c("div",pa,[...t[14]||(t[14]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-nature-forest mx-auto mb-4"}),e("p",{class:"text-nature-dark"},"Loading artwork information...")],-1)])])):r.artwork?(d(),c("div",ha,[e("div",xa,[t[17]||(t[17]=e("h2",{class:"text-xl font-serif text-nature-forest mb-4"},"Operation Mode",-1)),e("div",ba,[e("button",{onClick:t[0]||(t[0]=n=>r.mode="edit"),class:G(["flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200",r.mode==="edit"?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},[...t[15]||(t[15]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),e("span",null,"Edit Artwork Info")],-1)])],2),e("button",{onClick:t[1]||(t[1]=n=>r.mode="append"),class:G(["flex-1 py-3 px-4 rounded-lg border-2 transition-all duration-200",r.mode==="append"?"border-nature-forest bg-nature-forest text-white":"border-nature-warm text-nature-dark hover:border-nature-forest"])},[...t[16]||(t[16]=[e("div",{class:"flex items-center justify-center space-x-2"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",null,"Append Images")],-1)])],2)])]),r.mode==="edit"?(d(),c("div",wa,[t[24]||(t[24]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2 mb-6"}," Edit Artwork Information ",-1)),e("form",{onSubmit:t[6]||(t[6]=R((...n)=>r.handleUpdateInfo&&r.handleUpdateInfo(...n),["prevent"])),class:"space-y-6"},[e("div",null,[t[18]||(t[18]=e("label",{for:"title",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Artwork Title "),e("span",{class:"text-red-500"},"*")],-1)),I(e("input",{id:"title","onUpdate:modelValue":t[2]||(t[2]=n=>r.editForm.title=n),type:"text",required:"",maxlength:"100",class:"input-field",placeholder:"Enter artwork title",disabled:r.submitting},null,8,ka),[[U,r.editForm.title]]),e("p",ya,v(r.editForm.title.length)+"/100 characters ",1)]),e("div",null,[t[19]||(t[19]=e("label",{for:"creationDate",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" Creation Date "),e("span",{class:"text-red-500"},"*")],-1)),I(e("input",{id:"creationDate","onUpdate:modelValue":t[3]||(t[3]=n=>r.editForm.creationDate=n),type:"date",required:"",class:"input-field",disabled:r.submitting},null,8,_a),[[U,r.editForm.creationDate]])]),e("div",null,[t[20]||(t[20]=e("label",{for:"description",class:"block text-sm font-medium text-nature-forest mb-2"},[L(" 作品简介 "),e("span",{class:"text-red-500"},"*")],-1)),I(e("textarea",{id:"description","onUpdate:modelValue":t[4]||(t[4]=n=>r.editForm.description=n),required:"",maxlength:"1000",rows:"6",class:"input-field resize-none",placeholder:"请详细描述作品的创作背景、技法特点、艺术价值等...",disabled:r.submitting},null,8,Ca),[[U,r.editForm.description]]),e("p",Pa,v(r.editForm.description.length)+"/1000 字符 ",1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-nature-forest mb-2"}," 封面图片 ",-1)),e("div",Aa,[(d(!0),c(O,null,$(r.artwork.images,(n,g)=>(d(),c("div",{key:g,onClick:w=>r.selectCoverImage(n),class:G(["relative aspect-square rounded-lg overflow-hidden border-2 cursor-pointer transition-all duration-200",r.editForm.coverImageUrl===n.url?"border-nature-forest ring-2 ring-nature-forest":"border-nature-warm hover:border-nature-sky"])},[e("img",{src:n.thumbnailUrl,alt:`图片 ${g+1}`,class:"w-full h-full object-cover"},null,8,Ia),r.editForm.coverImageUrl===n.url?(d(),c("div",ja," 封 ")):k("",!0)],10,La))),128))]),t[22]||(t[22]=e("p",{class:"text-xs text-nature-sky mt-2"},"点击图片选择封面",-1))]),e("div",Ma,[e("button",{type:"button",onClick:t[5]||(t[5]=(...n)=>r.resetEditForm&&r.resetEditForm(...n)),class:"btn-outline",disabled:r.submitting}," 重置 ",8,Sa),e("button",{type:"submit",disabled:r.submitting,class:"btn-primary"},[r.submitting?(d(),c("div",Fa,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"更新中...",-1)])])):(d(),c("span",Ua,"更新作品信息"))],8,Da)])],32)])):k("",!0),r.mode==="append"?(d(),c("div",Ea,[t[28]||(t[28]=e("h2",{class:"text-2xl font-serif text-nature-forest border-b border-nature-warm pb-2 mb-6"}," 向作品追加图片 ",-1)),e("div",Ba,[e("div",null,[e("h3",Ta,"当前图片 ("+v(r.artwork.images.length)+" 张)",1),e("div",za,[(d(!0),c(O,null,$(r.artwork.images,(n,g)=>(d(),c("div",{key:g,class:"relative aspect-square rounded-lg overflow-hidden bg-nature-warm border-2 border-nature-warm"},[e("img",{src:n.thumbnailUrl,alt:`图片 ${g+1}`,class:"w-full h-full object-cover"},null,8,qa),r.artwork.coverImage.url===n.url?(d(),c("div",Ga," 封 ")):k("",!0),e("button",{onClick:w=>r.deleteImage(n),class:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full opacity-0 hover:opacity-100 transition-opacity duration-200 flex items-center justify-center hover:bg-red-600"},[...t[25]||(t[25]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Va)]))),128))])]),e("div",null,[t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-nature-forest mb-4"},"上传新图片",-1)),A(m,{ref:"imageUploader","max-files":12,"max-file-size":10*1024*1024,"accepted-types":["image/jpeg","image/png"],onFilesChange:r.handleFilesChange},null,8,["onFilesChange"])]),e("div",Na,[e("button",{onClick:t[7]||(t[7]=(...n)=>r.handleAppendImages&&r.handleAppendImages(...n)),disabled:r.submitting||r.selectedFiles.length===0,class:"btn-primary disabled:opacity-50"},[r.submitting?(d(),c("div",$a,[...t[27]||(t[27]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"},null,-1),e("span",null,"上传中...",-1)])])):(d(),c("span",Ra,"追加图片"))],8,Oa)])])])):k("",!0),e("div",Ha,[t[29]||(t[29]=e("h2",{class:"text-xl font-serif text-red-700 mb-4"},"危险操作",-1)),t[30]||(t[30]=e("p",{class:"text-red-600 mb-4"}," 删除作品将永久移除所有相关图片和数据，此操作不可恢复。 ",-1)),e("button",{onClick:t[8]||(t[8]=(...n)=>r.confirmDelete&&r.confirmDelete(...n)),class:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors duration-200"}," 删除作品 ")])])):k("",!0),r.showSuccess?(d(),c("div",Ja,[e("div",Qa,[t[31]||(t[31]=e("div",{class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t[32]||(t[32]=e("h3",{class:"text-xl font-serif text-nature-forest mb-2"},"操作成功！",-1)),e("p",Ka,v(r.successMessage),1),e("div",Wa,[e("button",{onClick:t[9]||(t[9]=n=>r.showSuccess=!1),class:"btn-primary flex-1"}," 确定 ")])])])):k("",!0)])}const Za=V(da,[["render",Ya],["__scopeId","data-v-88e8f741"]]),Xa=[{path:"/",name:"Gallery",component:Et,meta:{title:"Gallery - Landscape Oil Painting Gallery"}},{path:"/artwork/:id",name:"ArtworkDetail",component:Fr,meta:{title:"Artwork Details - Landscape Oil Painting Gallery"}},{path:"/admin/login",name:"AdminLogin",component:Hr,meta:{title:"Admin Login - Landscape Oil Painting Gallery"}},{path:"/admin",name:"AdminDashboard",component:to,meta:{title:"Admin Dashboard - Landscape Oil Painting Gallery",requiresAuth:!0}},{path:"/admin/artworks/new",name:"UploadNewArtwork",component:ia,meta:{title:"Upload New Artwork - Landscape Oil Painting Gallery",requiresAuth:!0}},{path:"/admin/artworks/append",name:"AppendImages",component:()=>Pe(()=>import("./AppendImagesPage-55b422c4.js"),["assets/AppendImagesPage-55b422c4.js","assets/vendor-29d2aae4.js","assets/axios-b5ee139b.js","assets/AppendImagesPage-da4314e1.css"]),meta:{title:"Add New Images to Existing Collection - Landscape Oil Painting Gallery",requiresAuth:!0}},{path:"/admin/artworks/:id/edit",name:"EditArtwork",component:Za,meta:{title:"Edit Artwork - Landscape Oil Painting Gallery",requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/"}],ge=xe({history:be(),routes:Xa,scrollBehavior(a,t,s){return s||{top:0}}});ge.beforeEach((a,t,s)=>{if(a.meta.title&&(document.title=a.meta.title),a.meta.requiresAuth&&!ee().isAdmin){s({name:"AdminLogin",query:{redirect:a.fullPath}});return}if(a.name==="AdminLogin"&&ee().isAdmin){s({name:"AdminDashboard"});return}s()});const en={name:"App",setup(){const a=ee(),t=se(),s=f(!1),r=f(""),u=M(()=>a.loading||t.loading),i=M(()=>a.error||t.error),o=()=>{s.value=u.value},m=()=>{r.value=i.value||""},l=()=>{r.value="",a.clearError(),t.clearError()},n=async()=>{try{await a.initAuth(),a.isAuthenticated&&await t.fetchList()}catch(g){console.error("Application initialization failed:",g)}};return Y(()=>{n()}),a.$subscribe(o),t.$subscribe(o),t.$subscribe(m),{globalLoading:s,globalError:r,clearGlobalError:l}}},tn={id:"app",class:"min-h-screen bg-nature-canvas"},rn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},sn={key:1,class:"fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded z-50 max-w-md"},on={class:"flex items-center justify-between"};function an(a,t,s,r,u,i){const o=T("router-view");return d(),c("div",tn,[A(o),r.globalLoading?(d(),c("div",rn,[...t[1]||(t[1]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-nature-forest"}),e("span",{class:"text-nature-dark font-medium"},"加载中...")],-1)])])):k("",!0),r.globalError?(d(),c("div",sn,[e("div",on,[e("span",null,v(r.globalError),1),e("button",{onClick:t[0]||(t[0]=(...m)=>r.clearGlobalError&&r.clearGlobalError(...m)),class:"ml-4 text-red-700 hover:text-red-900"},[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])):k("",!0)])}const nn=V(en,[["render",an]]);const ne=we(nn),ln=ke();ne.use(ln);ne.use(ge);ne.mount("#app");export{fe as I,V as _,Ae as a,Z as b,se as u};
